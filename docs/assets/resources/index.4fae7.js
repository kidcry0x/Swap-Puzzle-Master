window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return r(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({ActiveOff:[function(t,e,o){"use strict";cc._RF.push(e,"4de8dFsW7ZH6oMYwavR6CBy","ActiveOff");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onFinishAnimation=function(){this.node.active=!1},i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],AdsManager:[function(t,e,o){"use strict";cc._RF.push(e,"7e38ccU2UlHZ4s/lEcDhcJ+","AdsManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../base/Data"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.code="ADS_NOT_LOADED",e}return r(e,t),e}(Error)),p=function(){function t(){this.preloadedInterstitial=null,this.preloadedReward=null,this.isLoadedInsterestialAds=!1,this.isLoadedRewardAds=!1,this.lastShowTime=0,this.adsRetryTime=45e3}var e;return e=t,t.getInstance=function(){return e.instance||(e.instance=new e),e.instance},t.prototype.loadBannerAds=function(t){void 0===t&&(t=null);try{FBInstant.loadBannerAdAsync("1047869355964641_1061665381251705").then(function(e){console.log("banner",e),t&&t(null)}).catch(function(e){console.error("banner failed to load: "+e.message),t&&t(e)})}catch(e){t&&t(e),console.error(e)}},t.prototype.hideBannerAds=function(){try{FBInstant.hideBannerAdAsync().then(function(){console.log("Banner hide")})}catch(t){console.error(t)}},t.prototype.preloadInterestialAds=function(){var t=this;this.isLoadedInsterestialAds||FBInstant.getInterstitialAdAsync("1047869355964641_1061665527918357").then(function(e){return cc.log(t),t.preloadedInterstitial=e,t.preloadedInterstitial.loadAsync()}).then(function(){console.log("Interstitial preloaded"),t.isLoadedInsterestialAds=!0}).catch(function(e){console.error("Interstitial failed to preload: "+e.message),setTimeout(function(){this.handleAdsNoFill(this.preloadedInterstitial,2)}.bind(t),t.adsRetryTime)})},t.prototype.preloadRewardVideoAds=function(){var t=this;this.isLoadedRewardAds||FBInstant.getRewardedVideoAsync("1047869355964641_1061665594585017").then(function(e){return t.preloadedReward=e,t.preloadedReward.loadAsync()}).then(function(){console.log("reward preloaded"),t.isLoadedRewardAds=!0}).catch(function(t){console.error("reward failed to preload: "+t.message)})},t.prototype.preload=function(){var t=this;setTimeout(function(){t.preloadInterestialAds()},this.adsRetryTime),this.preloadRewardVideoAds()},t.prototype.handleAdsNoFill=function(t,e){var o=this;e>3||t.loadAsync().then(function(){console.log("Interstitial preloaded"),o.isLoadedInsterestialAds=!0}).catch(function(n){console.error("Interstitial failed to preload: "+n.message),setTimeout(function(){o.handleAdsNoFill(t,e+1)},o.adsRetryTime)})},t.prototype.showInterestialAds=function(t){var e=this;void 0===t&&(t=null),Date.now()-this.lastShowTime<this.adsRetryTime?t&&t(Error("CAPPED_TIME")):null!=this.preloadedInterstitial?(cc.audioEngine.pauseMusic(),this.preloadedInterstitial.showAsync().then(function(){c.default.userData.settings.music&&cc.audioEngine.resumeMusic(),e.isLoadedInsterestialAds=!1,console.log("Interstitial ad finished successfully"),e.preloadInterestialAds(),e.lastShowTime=Date.now(),t&&t(null)}).catch(function(e){c.default.userData.settings.music&&cc.audioEngine.resumeMusic(),console.error(e.message),t&&t(e)})):t&&t(Error("NULL inters"))},t.prototype.reloadRewardedAds=function(){this.isLoadedRewardAds=!1,console.log("Rewarded ad finished successfully"),this.preloadRewardVideoAds()},t.prototype.showRewardedAds=function(t){var e=this;if(void 0===t&&(t=null),cc.audioEngine.pauseMusic(),this.preloadedReward&&this.preloadedReward.showAsync().then(function(){e.reloadRewardedAds(),t&&t(null),c.default.userData.settings.music&&cc.audioEngine.resumeMusic()}).catch(function(o){c.default.userData.settings.music&&cc.audioEngine.resumeMusic(),console.error("ads err",o.message),e.reloadRewardedAds(),t&&t(o)}),!this.preloadedReward){cc.audioEngine.resumeMusic();var o=new l("ADS_NOT_LOADED");o.code="ADS_NOT_LOADED",t&&t(o)}},t.prototype.onAdsRewardFail=function(){cc.find("Canvas/UI").getComponent("UIController").showAlert("NO INTERNET CONNECTION",2.5)},t.prototype.getInsterestialPlacementId=function(){return"1047869355964641_1061665527918357"},t.prototype.getRewardPlacementId=function(){return"1047869355964641_1061665594585017"},e=i([s],t)}();o.default=p,cc._RF.pop()},{"../base/Data":"Data"}],BaseController:[function(t,e,o){"use strict";cc._RF.push(e,"97e51lWcYBC7aCaXNpEcNvD","BaseController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../pooling/NodePool"),a=t("../SoundManager"),s=t("../SoundManager"),l=t("../fb/AdsManager"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.custom=null,e.gameCustomization=null,e.content=null,e}return r(e,t),e.prototype.onClick=function(){a.default.getInstance().playSound(s.Sound.CLICK,!1,1)},e.prototype.openGameCustomization=function(){var t=this;this.gameCustomization?this.gameCustomization.node.active=!0:cc.resources.load("customization/gameCustomization",cc.Prefab,function(e,o){e&&console.error(e);var n=cc.instantiate(o);t.gameCustomization=n.getComponent("GameCustomization"),t.gameCustomization.node.zIndex=cc.macro.MAX_ZINDEX-1,cc.find("Canvas").getComponent("GameController").gameCustomization=t.gameCustomization,cc.Canvas.instance.node.addChild(t.gameCustomization.node)})},e.prototype.openCollection=function(){l.default.getInstance().showInterestialAds()},e.prototype.clearContent=function(){for(;;){var t=this.content.children[0];if(!t)break;c.default.put(c.TypePool.PICTURE,t)}},i([d(cc.Prefab)],e.prototype,"custom",void 0),i([d(cc.Node)],e.prototype,"content",void 0),i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../SoundManager":"SoundManager","../fb/AdsManager":"AdsManager","../pooling/NodePool":"NodePool"}],ButtonContainer:[function(t,e,o){"use strict";cc._RF.push(e,"45aa3I6DFtJ/oo6xE0y6fGb","ButtonContainer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=[],e}return r(e,t),e.prototype.onClick=function(t){this.button.map(function(e){e.node.name==t.target.name?(e.node.getChildByName("on").active=!0,e.node.getChildByName("off").active=!1):(e.node.getChildByName("off").active=!0,e.node.getChildByName("on").active=!1)})},i([s([cc.Button])],e.prototype,"button",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],CanvasSize:[function(t,e,o){"use strict";cc._RF.push(e,"30f24hhdlVOAbBf1PrMsuse","CanvasSize");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],CaptureScreenShot:[function(t,e,o){"use strict";cc._RF.push(e,"67d89E5P5hPB6EfrUuzQ3z7","CaptureScreenShot");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canvas=null,e.targetNode=null,e.camera=null,e.texture=null,e}return r(e,t),e.prototype.onLoad=function(){this._canvas,this.init(),this.scheduleOnce(function(){var t=cc.game.canvas,e=t.width,o=t.height,n=(cc.Canvas.instance.node.width,cc.Canvas.instance.node.height,e),r=o,i=e,c=o,a=document.createElement("canvas"),s=a.getContext("2d");a.width=n,a.height=r,s.drawImage(t,i,c,n,r,0,0,n,r);var l=t.toDataURL("image/png");console.error(l)},3)},e.prototype.init=function(){var t=new cc.RenderTexture,e=cc.game._renderContext;t.initWithSize(this.node.width,this.node.height,cc.Texture2D.PIXEL_FORMAT_RGBA4444,e.DEPTH24_STENCIL8_OES),this.camera=this.node.addComponent(cc.Camera),this.camera.targetTexture=t,this.texture=t},e.prototype.initImage=function(){var t=this._canvas.toDataURL("image/png"),e=document.createElement("img");return e.src=t,e},e.prototype.createSprite=function(){var t=this.texture.width,e=this.texture.height;this._canvas?this.clearCanvas():(this._canvas=cc.game.canvas,this._canvas.width=t,this._canvas.height=e);var o=this._canvas.getContext("2d");this.camera.render();for(var n=this.texture.readPixels(),r=4*t,i=0;i<e;i++){for(var c=e-1-i,a=o.createImageData(t,1),s=c*t*4,l=0;l<r;l++)a.data[l]=n[s+l];o.putImageData(a,0,i)}return this._canvas},e.prototype.getTargetArea=function(){var t=this.targetNode.convertToWorldSpaceAR(cc.v2(0,0)),e=cc.winSize.height-t.y-this.targetNode.height/2;return{x:cc.winSize.width-t.x-this.targetNode.width/2,y:e}},e.prototype.downloadImg=function(){this.createSprite();var t=this.initImage();this.showSprite(t);var e=this._canvas.toDataURL("image/png"),o=document.createElement("a");o.href=e,o.download="image",document.body.appendChild(o),o.click(),document.body.removeChild(o)},e.prototype.showSprite=function(t){var e=this.getTargetArea().y,o=this.getTargetArea().x,n=new cc.Rect(o,e,770,800),r=new cc.Texture2D;r.initWithElement(t);var i=new cc.SpriteFrame;i.setTexture(r),i.setRect(n);var c=new cc.Node;c.addComponent(cc.Sprite).spriteFrame=i,c.zIndex=cc.macro.MAX_ZINDEX,c.parent=cc.director.getScene();var a=cc.winSize.width,s=cc.winSize.height;c.x=a/2,c.y=s/2,c.on(cc.Node.EventType.TOUCH_START,function(){c.parent=null,c.destroy()}),this.captureAction(c,a,s)},e.prototype.captureAction=function(t,e,o){var n=cc.scaleTo(1,.3),r=cc.v2(e-e/6,o/4),i=cc.moveTo(1,r),c=cc.spawn(n,i),a=cc.callFunc(function(){t.destroy()}),s=cc.sequence(c,a);t.runAction(s)},e.prototype.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},e.prototype.capture=function(t){var e=this,o=new cc.RenderTexture;o.initWithSize(Math.floor(cc.view.getVisibleSize().width),Math.floor(cc.view.getVisibleSize().height));var n=new gfx.ColorAttachment;n.loadOp=gfx.LoadOp.LOAD;var r=new gfx.DepthStencilAttachment,i=new gfx.RenderPassInfo([n],r);o.reset(o.width,o.height,i),this.sceneCamera.targetTexture=o,this.scheduleOnce(function(){e.uiCamera.targetTexture=o}),this.scheduleOnce(function(){WebUtil.saveas(t,e.getImage(o)),e.sceneCamera.targetTexture=null,e.uiCamera.targetTexture=null},.1)},i([s(cc.Node)],e.prototype,"targetNode",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],CheatListener:[function(t,e,o){"use strict";cc._RF.push(e,"adb80h/HRZPE5f/s19+Ox6i","CheatListener");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cheatPrefab=null,e._count=0,e}return r(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onListener,this)},e.prototype.onListener=function(){var t=this;if(++this._count,1==this._count&&this.scheduleOnce(function(){t._count=0},4),10==this._count){this._count=0;var e=cc.find("Canvas/cheat");e?e.active=!0:((e=cc.instantiate(this.cheatPrefab)).zIndex=cc.macro.MAX_ZINDEX,cc.find("Canvas").addChild(cc.instantiate(e)))}},i([s(cc.Prefab)],e.prototype,"cheatPrefab",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Cheat:[function(t,e,o){"use strict";cc._RF.push(e,"93b948E2gxDHYRIQMBdjaKu","Cheat");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../scripts/base/Data"),a=t("../scripts/base/DataFacebook"),s=t("../scripts/EnumContainer"),l=t("../scripts/Profile/Profile"),p=t("../scripts/base/Config"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.money=null,e}return r(e,t),e.prototype.onEnable=function(){this._money=c.default.userData.typeMoney.gold},e.prototype.removeData=function(){(new a.default).setData(s.DataKey.FACEBOOK,p.defaultData)},e.prototype.changeMoney=function(){this._money=Number(this.money.string),this._money&&(this._money>=0&&this._money<9999&&(c.default.userData.typeMoney.gold=this._money),(new a.default).setData(s.DataKey.FACEBOOK,c.default.userData),l.default.getInstance().money.string=""+c.default.userData.typeMoney.gold)},e.prototype.onClose=function(){this.node.active=!1},i([h(cc.EditBox)],e.prototype,"money",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../scripts/EnumContainer":"EnumContainer","../scripts/Profile/Profile":"Profile","../scripts/base/Config":"Config","../scripts/base/Data":"Data","../scripts/base/DataFacebook":"DataFacebook"}],CollectionController:[function(t,e,o){"use strict";cc._RF.push(e,"279feGJgktGybBHca8NvtBr","CollectionController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BaseController"),a=t("./ListCollection"),s=t("./ListPicture"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabCollection=null,e.tabPicture=null,e._collectionName="",e}return r(e,t),e.prototype.onLoad=function(){this.tabCollection.controller=this,this.tabPicture.controller=this},e.prototype.onEnable=function(){this.tabCollection.node.active=!0,this.tabPicture.node.active=!1},e.prototype.onClick=function(){throw new Error("Method not implemented.")},e.prototype.openCollection=function(e){t.prototype.openCollection.call(this,e),this.tabPicture.node.active=!0,this.tabPicture.generatePicture(e.collectionName),this.tabPicture.controller=this,this.tabCollection.node.active=!1},i([u(a.default)],e.prototype,"tabCollection",void 0),i([u(s.default)],e.prototype,"tabPicture",void 0),i([p],e)}(c.default);o.default=d,cc._RF.pop()},{"./BaseController":"BaseController","./ListCollection":"ListCollection","./ListPicture":"ListPicture"}],CollectionItem:[function(t,e,o){"use strict";cc._RF.push(e,"776ceWeaDFJNrBnim8bGY23","CollectionItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../base/controller/GameController"),a=t("./ItemBase"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectionNameLabel=null,e}return r(e,t),e.prototype.onLoad=function(){this.lock.node.active=!1},e.prototype.init=function(t){this.collectionName=t,this.setCollectionName(),this.getPicture()},e.prototype.setCollectionName=function(){this.collectionNameLabel.string=this.collectionName.toUpperCase()},e.prototype.getPicture=function(){var t=this,e=c.default.getInstance().getCollectionAvatar(this.collectionName);e?this.setPicture(e):(this.loading.active=!0,cc.resources.load("collections/avatar/"+this.collectionName,cc.SpriteFrame,function(e,o){e?console.error(e):(t.setPicture(o),t.loading.active=!1)}))},i([p(cc.Label)],e.prototype,"collectionNameLabel",void 0),i([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../base/controller/GameController":"GameController","./ItemBase":"ItemBase"}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"006e99h22hNbIfV8s2n+9BZ","Config"),Object.defineProperty(o,"__esModule",{value:!0}),o.defaultData=o.LevelConfig=void 0,o.LevelConfig={_3x3:{name:"3x3",bonus:10,exp:10},_4x4:{name:"4x4",bonus:15,exp:15},_5x5:{name:"5x5",bonus:25,exp:25},_6x6:{name:"6x6",bonus:40,exp:40}},o.defaultData={mode:0,hint:3,level:{totalExp:0},typeMoney:{gold:0},firstPlay:null,settings:{sound:!0,music:!0,snow:!0},languege:"en",collections:[{name:"frame",played:[{name:"frame0",bestTime:0,frame:{position:cc.v3(0,0),angle:0,size:cc.v3(680,680)}},{name:"frame1",bestTime:0,frame:{position:cc.v3(-150,-95),angle:25,size:cc.v3(680,680)}},{name:"frame2",bestTime:0,frame:{position:cc.v3(-173,-236),angle:10,size:cc.v3(600,600)}},{name:"frame3",bestTime:0,frame:{position:cc.v3(40,65),angle:0,size:cc.v3(820,820)}},{name:"frame4",bestTime:0,frame:{position:cc.v3(-20,53),angle:0,size:cc.v3(430,430)}},{name:"frame5",bestTime:0,frame:{position:cc.v3(-105,0),angle:0,size:cc.v3(580,580)}},{name:"frame6",bestTime:0,frame:{position:cc.v3(-120,-116),angle:-23,size:cc.v3(430,430)}},{name:"frame7",bestTime:0,frame:{position:cc.v3(70,15),angle:0,size:cc.v3(680,680)}},{name:"frame8",bestTime:0,frame:{position:cc.v3(80,-135),angle:0,size:cc.v3(600,600)}},{name:"frame9",bestTime:0,frame:{position:cc.v3(25,87),angle:0,size:cc.v3(460,460)}},{name:"frame10",bestTime:0,frame:{position:cc.v3(0,115),angle:-1,size:cc.v3(700,700)}},{name:"frame11",bestTime:0,frame:{position:cc.v3(132,-282),angle:-2,size:cc.v3(400,400)}},{name:"frame12",bestTime:0,frame:{position:cc.v3(-1,-85),angle:1,size:cc.v3(480,480)}},{name:"frame13",bestTime:0,frame:{position:cc.v3(-2,20),angle:1,size:cc.v3(600,600)}},{name:"frame14",bestTime:0,frame:{position:cc.v3(17,-10),angle:0,size:cc.v3(460,460)}},{name:"frame15",bestTime:0,frame:{position:cc.v3(-50,80),angle:-1,size:cc.v3(600,600)}},{name:"frame16",bestTime:0,frame:{position:cc.v3(166,23),angle:1,size:cc.v3(450,450)}},{name:"frame17",bestTime:0,frame:{position:cc.v3(135,30),angle:-15,size:cc.v3(480,480)}}],locked:[],watched:0,ads:0,pay:0,total:18},{name:"animals",played:[],locked:[{name:"animals7",watched:0,ads:1,pay:100},{name:"animals19",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:23},{name:"christmas",played:[],locked:[{name:"christmas2",watched:0,ads:1,pay:100},{name:"christmas7",watched:0,ads:1,pay:100},{name:"christmas12",watched:0,ads:1,pay:100},{name:"christmas16",watched:0,ads:1,pay:100},{name:"christmas28",watched:0,ads:1,pay:100},{name:"christmas33",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:40},{name:"candy",played:[],locked:[{name:"candy4",watched:0,ads:1,pay:100},{name:"candy7",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:12},{name:"color",played:[],locked:[{name:"color4",watched:0,ads:1,pay:100},{name:"color7",watched:0,ads:1,pay:100},{name:"color12",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:21},{name:"food",played:[],locked:[{name:"food6",watched:0,ads:1,pay:100},{name:"food9",watched:0,ads:1,pay:100},{name:"food14",watched:0,ads:1,pay:100},{name:"food29",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:37},{name:"flowers",played:[],locked:[{name:"flowers6",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:14},{name:"classic",played:[],locked:[{name:"classic4",watched:0,ads:1,pay:100},{name:"classic17",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:26},{name:"universe",played:[],locked:[{name:"universe6",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:9},{name:"architecture",played:[],locked:[],watched:0,ads:0,pay:0,total:8},{name:"nature",played:[],locked:[],watched:0,ads:0,pay:0,total:10},{name:"art",played:[],locked:[{name:"art4",watched:0,ads:1,pay:100}],watched:0,ads:0,pay:0,total:10},{name:"wonders",played:[],locked:[],watched:0,ads:0,pay:0,total:18}],favorite:[]},cc._RF.pop()},{}],Convert:[function(t,e,o){"use strict";cc._RF.push(e,"715892eQClA57uAW7tlbTyd","Convert");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=(r.property,function(){function t(){}return t.convertCoordinate=function(t,e){return cc.v3(t.convertToNodeSpaceAR(e.convertToWorldSpaceAR(t.position)))},t.convertSecondToFormat=function(t){var e=Math.floor(t/3600),o=Math.floor(Math.floor(t-3600*e)/60),n=Math.floor(t-3600*e-60*o);return(o<10?"0"+o:""+o)+":"+(n<10?"0"+n:""+n)},t.convertFormatToSecond=function(t){var e=t.split(":");return 3600*+e[0]+60*+e[1]+ +e[2]},n([i],t)}());o.default=c,cc._RF.pop()},{}],Coordinates:[function(t,e,o){"use strict";cc._RF.push(e,"fe3936F/w1Of7AcBgHJf28V","Coordinates");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._coordinate=[],e._scale=0,e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.node.children.map(function(e){t._coordinate.push(e.position)}),this._scale=this.node.children[0].scale},e.prototype.getScale=function(){return this._scale},e.prototype.getAllCoordinate=function(){return this._coordinate},i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],CountingTime:[function(t,e,o){"use strict";cc._RF.push(e,"aad2fbMRx1JK7LIL96LzYkZ","CountingTime");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countTime=null,e.seconds=0,e}return r(e,t),e.prototype.onEnable=function(){this.seconds=0,this.countTime.string=this.convertTimeFormat(this.seconds),this.startCountingTime()},e.prototype.startCountingTime=function(){this.seconds=0,this.countTime.string=this.convertTimeFormat(this.seconds),this.schedule(this.countingTime,1)},e.prototype.stopCountingTime=function(){return this.unschedule(this.countingTime),this.seconds},e.prototype.countingTime=function(){++this.seconds,this.countTime.string=this.convertTimeFormat(this.seconds)},e.prototype.convertTimeFormat=function(t){var e=Math.floor(t/60);return(e<10?"0"+e:e)+":"+((t-=60*e)<10?"0"+t:t)},i([s(cc.Label)],e.prototype,"countTime",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],DailyController:[function(t,e,o){"use strict";cc._RF.push(e,"4aef1NVRUFHSadnfF+aTtG5","DailyController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BaseController"),a=t("../Global"),s=t("../pooling/NodePool"),l=t("../pooling/NodePool"),p=t("../item/ItemBase"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.todayPicture=null,e.todayLabel=null,e.dateItem=null,e.loadingToday=null,e.header=null,e.currentMonth=null,e._originalPos=cc.Vec3.ZERO,e}return r(e,t),e.prototype.onEnable=function(){this.initItemToday(),this.header.on(cc.Node.EventType.TOUCH_START,this.onTouchEvent,this),this.header.on(cc.Node.EventType.TOUCH_END,this.onTouchEvent,this),this.currentMonth.string=this.getMonthName((new Date).getMonth()).toUpperCase()},e.prototype.start=function(){this.addItemDate()},e.prototype.onDisable=function(){this.header.off(cc.Node.EventType.TOUCH_START,this.onTouchEvent,this),this.header.off(cc.Node.EventType.TOUCH_END,this.onTouchEvent,this)},e.prototype.onTouchEvent=function(t){switch(t.getType()){case cc.Node.EventType.TOUCH_START:this._originalPos=t.getLocation();break;case cc.Node.EventType.TOUCH_END:var e=t.getLocation();this._originalPos.x==e.x&&(this._originalPos.y,e.y)}},e.prototype.onClick=function(){},e.prototype.getMonthName=function(t){switch(t){case 0:return"january";case 1:return"february";case 2:return"march";case 3:return"april";case 4:return"may";case 5:return"june";case 6:return"july";case 7:return"august";case 8:return"september";case 9:return"october";case 10:return"november";case 11:return"december";default:return"unknow"}},e.prototype.initItemToday=function(){var t=this,e=new Date,o=e.getDate(),n=e.getMonth(),r=e.getFullYear();this.todayLabel.string=n+1+"/"+o+"/"+r,this.loadingToday.active=!0,cc.resources.load("collections/daily/"+this.getMonthName(n)+"/"+o,cc.SpriteFrame,function(e,o){t.todayPicture.spriteFrame=o,t.loadingToday.active=!1})},e.prototype.onPlay=function(){a.default.selectedPicture=this.todayPicture.spriteFrame,this.openGameCustomization()},e.prototype.addItemDate=function(){if(this.content.children.length<3)for(var t=(new Date).getDate()-2;t>=0;--t){var e=s.default.get(l.TypePool.DATE),o=e.getComponent("DateItem");o.controller=this,o.type=p.TypeItem.PICTURE,o.loadPicture(this.getMonthName((new Date).getMonth()),t+1),this.content.addChild(e)}else for(;this.content.children[2];)s.default.put(l.TypePool.DATE,this.content.children[2])},i([h(cc.Sprite)],e.prototype,"todayPicture",void 0),i([h(cc.Label)],e.prototype,"todayLabel",void 0),i([h(cc.Prefab)],e.prototype,"dateItem",void 0),i([h(cc.Node)],e.prototype,"loadingToday",void 0),i([h(cc.Node)],e.prototype,"header",void 0),i([h(cc.Label)],e.prototype,"currentMonth",void 0),i([d],e)}(c.default);o.default=f,cc._RF.pop()},{"../Global":"Global","../item/ItemBase":"ItemBase","../pooling/NodePool":"NodePool","./BaseController":"BaseController"}],DataFacebook:[function(t,e,o){"use strict";cc._RF.push(e,"4d60aU2fM5IRZIzy95uKOJZ","DataFacebook");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Data"),s=t("../fb/FBSDK"),l=t("./DataLocal"),p=t("../EnumContainer"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getData=function(t,e){var o=this;void 0===e&&(e=null),s.default.getInstance().getPlayerData(t,function(t,n){return!n||t?(new l.default).getData(p.DataKey.LOCAL,e):e&&e(t,i(i({},o.dataDefault),n))})},e.prototype.setData=function(t,e,o){void 0===o&&(o=null),s.default.getInstance().setPlayerData(t,e,function(t){t?(new l.default).setData(p.DataKey.LOCAL,e,o):o&&o(null)})},c([d],e)}(a.default));o.default=h,cc._RF.pop()},{"../EnumContainer":"EnumContainer","../fb/FBSDK":"FBSDK","./Data":"Data","./DataLocal":"DataLocal"}],DataLocal:[function(t,e,o){"use strict";cc._RF.push(e,"ddf48S/GNBCN7NBOIDXONDB","DataLocal");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Data"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getData=function(t,e){void 0===e&&(e=null);var o=null,n=cc.sys.localStorage.getItem(t);n&&(o=JSON.parse(n)),o?e&&e(null,o):(this.setData(t,this.dataDefault),e&&e(null,this.dataDefault))},e.prototype.setData=function(t,e,o){void 0===o&&(o=null),t&&(cc.sys.localStorage.setItem(t,JSON.stringify(e)),o&&o(null,e))},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"./Data":"Data"}],Data:[function(t,e,o){"use strict";cc._RF.push(e,"9e823TwPvlDxqtxxdz1U50E","Data");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Config"),i=cc._decorator,c=i.ccclass,a=(i.property,function(){function t(){this.dataDefault=r.defaultData}var e;return e=t,t.getInstance=function(){return e._instance||(e._instance=this),e._instance},t._instance=null,t.collections={},t.userData=r.defaultData,e=n([c],t)}());o.default=a,cc._RF.pop()},{"./Config":"Config"}],DateItem:[function(t,e,o){"use strict";cc._RF.push(e,"b154eM+4AJA2rRb8+rqLbdU","DateItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../scripts/item/PictureItem"),a=t("../../scripts/Global"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtDate=null,e._date=0,e._monthName="",e}return r(e,t),e.prototype.setDate=function(t){this._date=t,this.txtDate.string=""+this._date},e.prototype.loadPicture=function(t,e){var o=this;this.loading.active=!0,this.txtDate.string=e,this._monthName=t,this._date=+e,cc.resources.load("collections/daily/"+t+"/"+e,cc.SpriteFrame,function(t,e){t?console.error(t):(o.setPicture(e),o.loading.active=!1,o.updateState())})},e.prototype.onClick=function(e){t.prototype.onClick.call(this,e),a.default.monthName=this._monthName,a.default.date=this._date},i([p(cc.Label)],e.prototype,"txtDate",void 0),i([l],e)}(c.default);o.default=u,cc._RF.pop()},{"../../scripts/Global":"Global","../../scripts/item/PictureItem":"PictureItem"}],DraggingPiece:[function(t,e,o){"use strict";cc._RF.push(e,"5c86bmkHKhHaqlIrJej/HmZ","DraggingPiece");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Piece"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._slide=!0,e.controller=null,e._posMove=null,e}return r(e,t),e.prototype.onLoad=function(){this.originalCoordinate=cc.v2(this.node.position)},e.prototype.setPicture=function(e){t.prototype.setPicture.call(this,e),this._slide=!0},e.prototype.onTouchPiece=function(t){switch(t.getType()){case cc.Node.EventType.TOUCH_START:"content"==this.node.parent.name?(this._posMove=this.node.convertToNodeSpaceAR(t.getLocation()),this._slide=!0):(this._posMove=this.controller.currentLevel.node.convertToNodeSpaceAR(t.getLocation()),this._slide=!1);break;case cc.Node.EventType.TOUCH_MOVE:var e=this.controller.currentLevel.node.convertToNodeSpaceAR(t.getLocation());if(this._slide){var o=Math.abs(this._posMove.x-e.x),n=Math.abs(this._posMove.y-e.y);this._posMove=e,n-o>20&&e.y>-this.controller.currentLevel.node.width/2&&(this.node.position=e,this._slide=!1,this.node.parent=this.controller.currentLevel.node,this.node.scale=this.controller.currentLevel.getScale())}else{var r=this.controller.currentLevel.node;e.y<-r.width/2&&(e.y=-r.width/2),this.node.position=e}break;case cc.Node.EventType.TOUCH_END:var i=this.controller.currentLevel.node.convertToNodeSpaceAR(t.getLocation());this.controller.handlePosition(i,this)}},e.prototype.correct=function(){this.isCorrect=!0,this.removeEventCustom()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"./Piece":"Piece"}],Dragging:[function(t,e,o){"use strict";cc._RF.push(e,"0f4896Ad/VMTr3eJoa7ogDS","Dragging");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../customization/GameCustomization"),a=t("../../scripts/EnumContainer"),s=t("../../scripts/Global"),l=t("../../scripts/SoundManager"),p=t("./Coordinates"),u=t("./DraggingPiece"),d=t("./GameMode"),h=t("./Piece"),f=cc._decorator,y=f.ccclass,v=f.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabs=[],e.x3=null,e.x4=null,e.x5=null,e.x6=null,e.content=null,e.currentLevel=null,e._correct=0,e}return r(e,t),e.prototype.onLoad=function(){this.content.removeAllChildren(!0)},e.prototype.reStartGame=function(){t.prototype.reStartGame.call(this),this.init()},e.prototype.onHint=function(){var t,e=this.content.children[0];if(e)t=e.getComponent(u.default),e.parent=this.currentLevel.node,e.scale=this.currentLevel.getScale(),this.moveTo(cc.v3(t.originalCoordinate),t);else for(var o=0;o<this.currentLevel.node.children.length;++o)if(!(t=this.currentLevel.node.children[o].getComponent(u.default)).isCorrect)return void this.moveTo(cc.v3(t.originalCoordinate),t)},e.prototype.onDisable=function(){for(var t=this.content.children.length;0!==t;)this.content.children[0].parent=this.currentLevel.node,t=this.content.children.length},e.prototype.init=function(){this.game.btnView.active=!0,this._correct=0,this.activeLevel(s.default.currentLevel),this.addPictureAllPiece(s.default.selectedPicture),this.pushPieceToContainer(),this.picture.node.active=!1,this._coordinate=this.currentLevel.getAllCoordinate(),this.avatar.node.active=s.default.isFrame,this.frame.node.active=s.default.isFrame,this.picture.spriteFrame=s.default.selectedPicture,this.content.parent.parent.getComponent(cc.ScrollView).scrollToLeft(0),this.picture.spriteFrame=s.default.selectedPicture,this.frame.spriteFrame=this.picture.spriteFrame,this.activeFrame()},e.prototype.activeLevel=function(t){switch(t){case c.Level._3X3:this.x3||(this.x3=cc.instantiate(this.prefabs[0]).getComponent(p.default),this.pieceContainer.addChild(this.x3.node)),this.x3.node.active=!0,this.x4&&(this.x4.node.active=!1),this.x5&&(this.x5.node.active=!1),this.x6&&(this.x6.node.active=!1),this.currentLevel=this.x3;break;case c.Level._4X4:this.x4||(this.x4=cc.instantiate(this.prefabs[1]).getComponent(p.default),this.pieceContainer.addChild(this.x4.node)),this.x4.node.active=!0,this.x3&&(this.x3.node.active=!1),this.x5&&(this.x5.node.active=!1),this.x6&&(this.x6.node.active=!1),this.currentLevel=this.x4;break;case c.Level._5X5:this.x5||(this.x5=cc.instantiate(this.prefabs[2]).getComponent(p.default),this.pieceContainer.addChild(this.x5.node)),this.x5.node.active=!0,this.x4&&(this.x4.node.active=!1),this.x3&&(this.x3.node.active=!1),this.x6&&(this.x6.node.active=!1),this.currentLevel=this.x5;break;case c.Level._6X6:this.x6||(this.x6=cc.instantiate(this.prefabs[3]).getComponent(p.default),this.pieceContainer.addChild(this.x6.node)),this.x6.node.active=!0,this.x4&&(this.x4.node.active=!1),this.x5&&(this.x5.node.active=!1),this.x3&&(this.x3.node.active=!1),this.currentLevel=this.x6}},e.prototype.pushPieceToContainer=function(){for(var t=this.currentLevel.node.children.length;0!==t;){var e=Math.floor(Math.random()*t),o=this.currentLevel.node.children[e];o.parent=this.content,o.active=!0,o.scale=.6,o.position=cc.Vec3.ZERO,o.zIndex=0,o.getComponent("Piece").addEventCustom(),o.getComponent("DraggingPiece").controller=this,t=this.currentLevel.node.children.length}},e.prototype.handlePosition=function(t,e){this.getDistance2Point(t,cc.v3(e.originalCoordinate))<e.node.width*e.node.scale*(2/3)&&this.moveTo(cc.v3(e.originalCoordinate),e)},e.prototype.getDistance2Point=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.prototype.moveTo=function(t,e){var o=this;e.correct(),cc.tween(e.node).to(.5,{position:t},{easing:"cubicOut"}).call(function(){++o._correct,e.node.zIndex=cc.macro.MIN_ZINDEX,e.whiteLight.play(a.Effect.BLINK),o.checkWin()&&(o.picture.node.opacity=255,o.picture.node.active=!0,o.currentLevel.node.children.map(function(t){t.active=!1}),o.showFirework(),o.scheduleOnce(function(){o.onWin(function(t,e){t&&console.error(t),o.game.buttonEndGame.active=!0,o.game.block.active=!1,o.showResult(e),l.default.getInstance().pauseMusic(),l.default.getInstance().playSound(l.Sound.WIN,!1,.5),o.picture.node.active=!0})},2))}).start()},e.prototype.addCoordinateOriginal=function(){},e.prototype.addPictureAllPiece=function(t){var e=this;switch(this.setScaleAllPiece(1),this.currentLevel.node.children.map(function(o){var n=o.getComponent(h.default);n.gameMode=e,n.setPicture(t)}),s.default.currentLevel){case c.Level._3X3:this.setScaleAllPiece(.8529);break;case c.Level._4X4:this.setScaleAllPiece(1.1373);break;case c.Level._5X5:this.setScaleAllPiece(1.4217);break;case c.Level._6X6:this.setScaleAllPiece(1.7059)}},e.prototype.checkWin=function(){return this._correct==this._coordinate.length},e.prototype.mixPiece=function(){this.currentLevel.node.children.map(function(){})},e.prototype.setScaleAllPiece=function(t){this.currentLevel.node.children.map(function(e){e.getComponent(h.default).picture.node.scale=t})},i([v([cc.Prefab])],e.prototype,"prefabs",void 0),i([v(p.default)],e.prototype,"x3",void 0),i([v(p.default)],e.prototype,"x4",void 0),i([v(p.default)],e.prototype,"x5",void 0),i([v(p.default)],e.prototype,"x6",void 0),i([v(cc.Node)],e.prototype,"content",void 0),i([y],e)}(d.default);o.default=_,cc._RF.pop()},{"../../customization/GameCustomization":"GameCustomization","../../scripts/EnumContainer":"EnumContainer","../../scripts/Global":"Global","../../scripts/SoundManager":"SoundManager","./Coordinates":"Coordinates","./DraggingPiece":"DraggingPiece","./GameMode":"GameMode","./Piece":"Piece"}],DrawBorder:[function(t,e,o){"use strict";cc._RF.push(e,"8005aTkS/FE16rZomuGqDCt","DrawBorder");var n,r,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Border=void 0,function(t){t[t.SQUARE=0]="SQUARE",t[t.ROUND=1]="ROUND",t[t.CIRCLE=2]="CIRCLE"}(r=o.Border||(o.Border={}));var a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.border=r.SQUARE,e.root=null,e.graphic=null,e}return i(e,t),e.prototype.onEnable=function(){this.drawBorder()},e.prototype.drawBorder=function(){this.graphic.clear();var t=-this.root.width/2,e=-this.root.height/2,o=this.root.width,n=this.root.height,i=0;switch(this.border){case r.SQUARE:i=0;break;case r.ROUND:i=12;break;case r.CIRCLE:i=195}this.graphic.roundRect(t,e,o,n,i),this.graphic.stroke()},c([l({type:cc.Enum(r)})],e.prototype,"border",void 0),c([l(cc.Node)],e.prototype,"root",void 0),c([l(cc.Graphics)],e.prototype,"graphic",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],EnumContainer:[function(t,e,o){"use strict";cc._RF.push(e,"e489e4WLp9Bua6cB9iELXdv","EnumContainer"),Object.defineProperty(o,"__esModule",{value:!0}),o.Mode=o.Tab=o.Effect=o.TouchPiece=o.DataKey=o.ItemState=o.Item=void 0,function(t){t[t.LIBRARY=0]="LIBRARY",t[t.DAILY=1]="DAILY",t[t.COLLECTION=2]="COLLECTION",t[t.FAVORITE=3]="FAVORITE"}(o.Item||(o.Item={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.LOCK=1]="LOCK",t[t.FAVORITE=2]="FAVORITE"}(o.ItemState||(o.ItemState={})),function(t){t.LOCAL="localUserDataPuzzleSwapABINo1",t.FACEBOOK="facebookUserPuzzleSwapABINo1"}(o.DataKey||(o.DataKey={})),function(t){t.TOUCH_START="touchStartPiece",t.TOUCH_MOVE="touchMovePiece",t.TOUCH_END="touchEndPiece"}(o.TouchPiece||(o.TouchPiece={})),function(t){t.SCALE_UP="scaleUp",t.SCALE_DOWN="scaleDown",t.SHOW_BUTTON="showButton",t.HIDE_BUTTON="hideButton",t.SELECTED="selected",t.DESELECT="deselect",t.BLINK="blink",t.APPEAR="appear",t.DISAPPEAR="disappear"}(o.Effect||(o.Effect={})),function(t){t.LIBRARY="library",t.DAILY="daily",t.COLLECTION="collection",t.FAVORITE="favorite"}(o.Tab||(o.Tab={})),function(t){t.SWAP="swap",t.DRAG="drag"}(o.Mode||(o.Mode={})),cc._RF.pop()},{}],FBSDK:[function(t,e,o){"use strict";cc._RF.push(e,"e2ee5v+HDpMnpl+kL0KCNeQ","FBSDK");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.supportedAPIs=[],e._linkAvatar=null,e._playerName="",e._shareImg=null,e._playerID="",e}return r(e,t),e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.checkSupportedAPIs=function(t){if(this.supportedAPIs)try{this.supportedAPIs=FBInstant.getSupportedAPIs()}catch(r){console.error(r),this.supportedAPIs=[]}for(var e=0,o=t;e<o.length;e++){var n=o[e];if(!this.supportedAPIs.includes(n))return!1}return!0},e.prototype.getAvatarPlayer=function(t){void 0===t&&(t=null);try{this._linkAvatar=FBInstant.player.getPhoto()}catch(e){cc.error(e)}return t&&t(this._linkAvatar),this},e.prototype.getPlayerID=function(t){void 0===t&&(t=null);try{this._playerID=FBInstant.player.getID()}catch(e){this._playerID="localID"}return t&&t(this.playerID),this},e.prototype.getPlayerName=function(t){void 0===t&&(t=null);try{this._playerName=FBInstant.player.getName()}catch(e){console.error(e)}return t&&t(this._playerName),this},e.prototype.getShareImg=function(t){var e=this;if(void 0===t&&(t=null),this._shareImg)return t(this._shareImg);cc.resources.load("Base64/ShareImg",cc.TextAsset,function(o,n){o&&console.error(o),e._shareImg=n.text,t(e._shareImg)})},e.prototype.canShareGame=function(){return this.checkSupportedAPIs(["shareAsync"])},e.prototype.shareGame=function(){this.getShareImg(function(t){var e=FBInstant.player.getID();FBInstant.shareAsync({intent:"REQUEST",image:t,text:"Let's play Jigsaw Puzzle!",data:{sharePlayerID:e}})})},e.prototype.inviteAsync=function(){var t=FBInstant.player.getName();this.getShareImg(function(e){FBInstant.inviteAsync({image:e,text:{default:t+" is asking for your help!"},data:{myReplayData:"..."}}).then(function(){})})},e.prototype.canInvitePlay=function(){return this.checkSupportedAPIs(["getLeaderboardAsync","updateAsync","context.switchAsync","context.chooseAsync","context.createAsync"])},e.prototype.getConnectedPlayers=function(t){if(this.checkSupportedAPIs(["player.getConnectedPlayers"]))try{FBInstant.player.getConnettedPlayerAsync().then(function(e){var o=e.map(function(t){return{id:t.getID(),name:t.getName(),photo:t.getPhoto()}});t(o)}).catch(function(t){cc.error("Get list failed: "+t)})}catch(e){cc.error(e)}},e.prototype.setPlayerData=function(t,e,o){void 0===o&&(o=null);try{if(!FBInstant)return o&&o(null)}catch(r){return r&&console.error("Set data failed: ",r),o&&o(r)}var n={};n[t]=e,FBInstant.player.setDataAsync(n).then(function(){return console.log("FB: Save successfully!"),o&&o(null)}).catch(function(t){return t&&console.error("Set data failed: ",t),o&&o(t)})},e.prototype.getPlayerData=function(t,e){try{if(!FBInstant)return e(null,null)}catch(o){return e({message:"FBInstant not found!"},null)}FBInstant.player.getDataAsync([t]).then(function(o){o[t]?e(null,o[t]):e("Data {}",null)}).catch(function(t){console.error("FBInstant getDataAsync: ",t),e(t,null)})},e.prototype.createShortcut=function(t){void 0===t&&(t=null);try{FBInstant.canCreateShortcutAsync().then(function(e){e&&FBInstant.createShortcutAsync().then(function(){cc.log("Create shortcut successfully!"),t(!0)}).catch(function(){cc.log("Create shortcut failed!"),t(!1)}),t(!1)})}catch(e){cc.error(e),t(!1)}},e.prototype.getLocale=function(){return FBInstant.getLocale()},e.prototype.setSessionData=function(t){FBInstant.setSessionData(t)},e.prototype.subcribeBot=function(t){void 0===t&&(t=null);try{FBInstant.player.canSubcribeBotAsync().then(function(e){e?FBInstant.player.canSubcribeBotAsync().then(function(){cc.log("Subcribe bot successfullt!"),t(!0)}).catch(function(e){cc.log("Subcribe bot failed!"+e),t(!1)}):t(!1)}).catch(function(t){cc.log("Can not subcribe bot! ",t)})}catch(e){cc.log(e),t(!1)}},e._instance=null,e}(cc.Component);o.default=i,cc._RF.pop()},{}],FavoriteController:[function(t,e,o){"use strict";cc._RF.push(e,"2bca8cqyJhObrx18Xzn8+tx","FavoriteController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../library/scripts/LibraryController"),a=t("../../scripts/base/Data"),s=cc._decorator.ccclass,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.scrollView.node.off("bounce-bottom",this.onBounceBottom,this),this.initAllItem()},e.prototype.initAllItem=function(){var t=this;this.clearContent(),this.getAllCollectionName(),a.default.userData.favorite.map(function(e){var o=e.split(new RegExp("[0-9]"))[0],n=e.split(new RegExp("[a-z]"));n=n[n.length-1],t.createAndAddChild(o,n)})},e.prototype.createAndAddChild=function(e,o){var n=t.prototype.createAndAddChild.call(this,e,o);return n.controller=this,n},i([s],e)}(c.default);o.default=l,cc._RF.pop()},{"../../library/scripts/LibraryController":"LibraryController","../../scripts/base/Data":"Data"}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"aa7c7d4NV9Nf7J4A5JVJ96o","GameController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.VERSION=void 0;var c=t("../../../library/scripts/LibraryController"),a=t("../DailyController"),s=t("../CollectionController"),l=t("../../../favorite/scripts/FavoriteController"),p=t("../../../settings/Settings"),u=t("../../fb/FBSDK"),d=t("../../../game/scripts/Game"),h=t("../../../customization/GameCustomization"),f=t("../../EnumContainer"),y=t("../../SoundManager"),v=t("../Data"),_=t("../../fb/AdsManager"),m=t("../../pooling/NodePool"),g=cc._decorator,b=g.ccclass,C=g.property;o.VERSION="v2.0.0";var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.centerContainer=null,e.library=null,e.daily=null,e.collection=null,e.favorite=null,e.settings=null,e.gameCustomization=null,e.snow=null,e.topContainer=null,e.botContainer=null,e.animals=[],e.frame=[],e.christmas=[],e.candy=[],e.color=[],e.food=[],e.avatar=[],e.currentTab=null,e.currentLevel=null,e.currentBonus=null,e.game=null,e.collectionName="",e}var o;return r(e,t),o=e,e.getInstance=function(){return o._instance||(o._instance=new o),o._instance},e.prototype.onLoad=function(){var t=this;o._instance=this,this.loadGameAsync(),this.activeTab(f.Tab.LIBRARY),this.openLibrary(),cc.resources.load("daily/daily"),cc.resources.load("favorite/favorite"),cc.resources.load("collection/collection"),cc.resources.load("gameCustomization/gameCustomization"),this.initPooling(),this.isFirstPlay()&&this.showGuide(),_.default.getInstance().loadBannerAds(function(e){e?t.scheduleOnce(function(){console.log("reload banner ads"),_.default.getInstance().loadBannerAds(function(e){e||t.resizeCanvas()})},10):t.resizeCanvas()}),this.snow.active=v.default.userData.settings.snow,this.snow.zIndex=cc.macro.MAX_ZINDEX;try{_.default.getInstance().preload()}catch(e){console.error(e)}},e.prototype.initPooling=function(){cc.resources.load("game/swappingPiece",cc.Prefab,function(t,e){t&&console.error(t),m.default.create(m.TypePool.SWAPPING_PIECE,e,16)})},e.prototype.onClick=function(t){switch(y.default.getInstance().playSound(y.Sound.CLICK,!1,1),t.target.name){case"btnSettings":this.openSettings();break;case"btnInvite":this.callAPIInvite();break;case"btnLibrary":this.openLibrary();break;case"btnCollection":this.openCollection();break;case"btnFavorite":this.openFavorite();break;case"btnDaily":this.openDaily()}},e.prototype.openSettings=function(){var t=this;this.settings?this.settings.node.active=!0:cc.resources.load("settings/settings",cc.Prefab,function(e,o){if(e)console.error(e);else{var n=cc.instantiate(o);t.settings=n.getComponent("Settings"),t.settings.node.zIndex=cc.macro.MAX_ZINDEX-1,cc.Canvas.instance.node.addChild(t.settings.node)}})},e.prototype.openLibrary=function(){if(this.library)this.activeTab(f.Tab.LIBRARY);else{var t=cc.instantiate(window.prefab.library);this.library=t.getComponent("LibraryController"),this.library.node.zIndex=cc.macro.MAX_ZINDEX-1,this.centerContainer.addChild(this.library.node),this.activeTab(f.Tab.LIBRARY)}},e.prototype.openCollection=function(){if(this.collection)this.activeTab(f.Tab.COLLECTION);else{var t=cc.instantiate(window.prefab.collection);this.collection=t.getComponent("CollectionController"),this.collection.node.zIndex=cc.macro.MAX_ZINDEX-1,this.centerContainer.addChild(this.collection.node),this.activeTab(f.Tab.COLLECTION)}},e.prototype.openFavorite=function(){var t=this;this.favorite?this.activeTab(f.Tab.FAVORITE):cc.resources.load("favorite/favorite",cc.Prefab,function(e,o){if(e)console.error(e);else{var n=cc.instantiate(o);t.favorite=n.getComponent("FavoriteController"),t.favorite.node.zIndex=cc.macro.MAX_ZINDEX-1,t.centerContainer.addChild(t.favorite.node),t.activeTab(f.Tab.FAVORITE)}})},e.prototype.openDaily=function(){if(this.daily)this.activeTab(f.Tab.DAILY);else{var t=cc.instantiate(window.prefab.daily);this.daily=t.getComponent("DailyController"),this.daily.node.zIndex=cc.macro.MAX_ZINDEX-1,this.centerContainer.addChild(this.daily.node),this.activeTab(f.Tab.DAILY)}},e.prototype.callAPIInvite=function(){u.default.getInstance().inviteAsync()},e.prototype.playGame=function(){this.game&&(this.game.node.active=!0)},e.prototype.loadGameAsync=function(){var t=cc.instantiate(window.prefab.game);t.active=!1,this.game=t.getComponent(d.default),cc.Canvas.instance.node.addChild(this.game.node),this.game.node.zIndex=cc.macro.MAX_ZINDEX-1},e.prototype.activeTab=function(t){switch(t){case f.Tab.LIBRARY:this.currentTab=this.library,this.library&&(this.library.node.active=!0),this.daily&&(this.daily.node.active=!1),this.collection&&(this.collection.node.active=!1),this.favorite&&(this.favorite.node.active=!1);break;case f.Tab.DAILY:this.currentTab=this.daily,this.library&&(this.library.node.active=!1),this.daily&&(this.daily.node.active=!0),this.collection&&(this.collection.node.active=!1),this.favorite&&(this.favorite.node.active=!1);break;case f.Tab.COLLECTION:this.currentTab=this.collection,this.library&&(this.library.node.active=!1),this.daily&&(this.daily.node.active=!1),this.collection&&(this.collection.node.active=!0),this.favorite&&(this.favorite.node.active=!1);break;case f.Tab.FAVORITE:this.currentTab=this.favorite,this.library&&(this.library.node.active=!1),this.daily&&(this.daily.node.active=!1),this.collection&&(this.collection.node.active=!1),this.favorite&&(this.favorite.node.active=!0)}},e.prototype.isFirstPlay=function(){if(!v.default.userData.firstPlay){var t=new Date;return v.default.userData.firstPlay=t.getTime(),!0}return!1},e.prototype.resizeCanvas=function(){var t=cc.find("Canvas/bot").getComponent(cc.Widget);cc.sys.os===cc.sys.OS_IOS?(console.log("%ciPhone","color: blue"),t.bottom=cc.Canvas.instance.node.height/11):(console.log("%cAndroid","color: blue"),t.bottom=cc.Canvas.instance.node.height/13),cc.find("Canvas/centerContainer").getComponent(cc.Widget).bottom+=t.bottom},e.prototype.showGuide=function(){cc.resources.load("guide/guide",cc.Prefab,function(t,e){t&&console.error(t);var o=cc.instantiate(e);cc.Canvas.instance.node.addChild(o)})},e.prototype.getSpriteFrame=function(t,e){switch(t){case"frame":for(var o=0;o<this.frame.length;++o)if(this.frame[o].name===e)return this.frame[o];break;case"animals":for(o=0;o<this.animals.length;++o)if(this.animals[o].name===e)return this.animals[o];break;case"christmas":for(o=0;o<this.christmas.length;++o)if(this.christmas[o].name===e)return this.christmas[o];break;case"candy":for(o=0;o<this.candy.length;++o)if(this.candy[o].name===e)return this.candy[o];break;case"color":for(o=0;o<this.color.length;++o)if(this.color[o].name===e)return this.color[o];break;case"food":for(o=0;o<this.food.length;++o)if(this.food[o].name===e)return this.food[o]}return null},e.prototype.getCollectionAvatar=function(t){switch(t){case"animals":return this.avatar[0];case"architecture":return this.avatar[1];case"art":return this.avatar[2];case"candy":return this.avatar[3];case"christmas":return this.avatar[4];case"classic":return this.avatar[5];case"color":return this.avatar[6];case"flowers":return this.avatar[7];case"food":return this.avatar[8];case"frame":return this.avatar[9];case"nature":return this.avatar[10];case"sea":return this.avatar[11];case"universe":return this.avatar[12];case"wonders":return this.avatar[13]}return null},e._instance=null,i([C(cc.Node)],e.prototype,"centerContainer",void 0),i([C(c.default)],e.prototype,"library",void 0),i([C(a.default)],e.prototype,"daily",void 0),i([C(s.default)],e.prototype,"collection",void 0),i([C(l.default)],e.prototype,"favorite",void 0),i([C(p.default)],e.prototype,"settings",void 0),i([C(h.default)],e.prototype,"gameCustomization",void 0),i([C(cc.Node)],e.prototype,"snow",void 0),i([C(cc.Node)],e.prototype,"topContainer",void 0),i([C(cc.Node)],e.prototype,"botContainer",void 0),i([C([cc.SpriteFrame])],e.prototype,"animals",void 0),i([C([cc.SpriteFrame])],e.prototype,"frame",void 0),i([C([cc.SpriteFrame])],e.prototype,"christmas",void 0),i([C([cc.SpriteFrame])],e.prototype,"candy",void 0),i([C([cc.SpriteFrame])],e.prototype,"color",void 0),i([C([cc.SpriteFrame])],e.prototype,"food",void 0),i([C([cc.SpriteFrame])],e.prototype,"avatar",void 0),o=i([b],e)}(cc.Component);o.default=P,cc._RF.pop()},{"../../../customization/GameCustomization":"GameCustomization","../../../favorite/scripts/FavoriteController":"FavoriteController","../../../game/scripts/Game":"Game","../../../library/scripts/LibraryController":"LibraryController","../../../settings/Settings":"Settings","../../EnumContainer":"EnumContainer","../../SoundManager":"SoundManager","../../fb/AdsManager":"AdsManager","../../fb/FBSDK":"FBSDK","../../pooling/NodePool":"NodePool","../CollectionController":"CollectionController","../DailyController":"DailyController","../Data":"Data"}],GameCustomization:[function(t,e,o){"use strict";cc._RF.push(e,"1df5dg5hVNI7pLz18Q9POyk","GameCustomization");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Level=void 0;var c,a=t("../scripts/base/controller/GameController"),s=t("../scripts/base/Data"),l=t("../scripts/EnumContainer"),p=t("../scripts/Global"),u=t("./LevelSlider"),d=t("../scripts/SoundManager"),h=t("../scripts/fb/AdsManager"),f=cc._decorator,y=f.ccclass,v=f.property;(function(t){t[t._3X3=3]="_3X3",t[t._4X4=4]="_4X4",t[t._5X5=5]="_5X5",t[t._6X6=6]="_6X6"})(c=o.Level||(o.Level={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picture=null,e.exampleSwap=[],e.exampleDrag=[],e.line=null,e.txtMoney=null,e.slider=null,e.frame=null,e.avatar=null,e.level=c._3X3,e.mode=l.Mode.SWAP,e._showAds=!1,e}return r(e,t),e.prototype.onLoad=function(){this.avatar.spriteFrame=p.default.avatarPlayer},e.prototype.onDisable=function(){this._showAds=!0,this.picture.spriteFrame=null},e.prototype.onEnable=function(){a.default.getInstance().topContainer.active=!1,a.default.getInstance().botContainer.active=!1;var t=p.default.selectedPicture;t.name.includes("frame")?(p.default.isFrame=!0,this.frame.node.active=!0,this.avatar.node.active=!0):(p.default.isFrame=!1,this.frame.node.active=!1,this.avatar.node.active=!1),this.txtMoney.string=""+s.default.userData.typeMoney.gold,this.setLine(this.level),this.slider.updateLevelAndMoney(0),this._showAds&&h.default.getInstance().showInterestialAds(),this.loadPicture(t.name)},e.prototype.onBack=function(){d.default.getInstance().playSound(d.Sound.CLICK,!1,1),a.default.getInstance().currentTab.node.active=!0,a.default.getInstance().topContainer.active=!0,a.default.getInstance().botContainer.active=!0,this.node.active=!1},e.prototype.onPlay=function(){d.default.getInstance().playSound(d.Sound.CLICK,!1,1),p.default.currentMode=this.mode,p.default.currentLevel=this.level,a.default.getInstance().playGame(),this.node.active=!1},e.prototype.onChangeMode=function(t,e){e==l.Mode.SWAP?this.mode=l.Mode.SWAP:e==l.Mode.DRAG&&(this.mode=l.Mode.DRAG),this.setLine(this.level)},e.prototype.onChangeLevel=function(t){this.level=t,this.setLine(this.level)},e.prototype.setLine=function(t){if(this.mode==l.Mode.SWAP)switch(t){case c._3X3:this.line.spriteFrame=this.exampleSwap[0];break;case c._4X4:this.line.spriteFrame=this.exampleSwap[1];break;case c._5X5:this.line.spriteFrame=this.exampleSwap[2];break;case c._6X6:this.line.spriteFrame=this.exampleSwap[3]}else if(this.mode==l.Mode.DRAG)switch(t){case c._3X3:this.line.spriteFrame=this.exampleDrag[0];break;case c._4X4:this.line.spriteFrame=this.exampleDrag[1];break;case c._5X5:this.line.spriteFrame=this.exampleDrag[2];break;case c._6X6:this.line.spriteFrame=this.exampleDrag[3]}},e.prototype.loadPicture=function(t){var e=this,o=t.split(new RegExp("[0-9]"))[0],n=t.split(new RegExp("[a-z]")),r=Number(n[n.length-1]);cc.resources.load("collections/"+o+"/"+t,cc.SpriteFrame,function(t,n){e.picture.spriteFrame=t?p.default.selectedPicture:n,n&&(p.default.isFrame?(e.avatar.node.active=!0,e.frame.node.active=!0,e.frame.spriteFrame=n,e.setAvatarPosition(o,r)):(e.avatar.node.active=!1,e.frame.node.active=!1,e.frame.spriteFrame=n)),e.picture.node.width=1020,e.picture.node.height=1020})},e.prototype.setAvatarPosition=function(t,e){var o=this;s.default.userData.collections.map(function(n){n.name==t&&n.played.map(function(n){if(n.name==t+e&&n.frame){p.default.frame=n.frame,o.avatar.node.setPosition(n.frame.position),o.avatar.node.angle=n.frame.angle,o.frame.node.width=1020,o.frame.node.height=1020;var r=n.frame.size;o.avatar.node.setContentSize(cc.size(r.x,r.y))}})})},i([v(cc.Sprite)],e.prototype,"picture",void 0),i([v([cc.SpriteFrame])],e.prototype,"exampleSwap",void 0),i([v([cc.SpriteFrame])],e.prototype,"exampleDrag",void 0),i([v(cc.Sprite)],e.prototype,"line",void 0),i([v(cc.Label)],e.prototype,"txtMoney",void 0),i([v(u.default)],e.prototype,"slider",void 0),i([v(cc.Sprite)],e.prototype,"frame",void 0),i([v(cc.Sprite)],e.prototype,"avatar",void 0),i([y],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../scripts/EnumContainer":"EnumContainer","../scripts/Global":"Global","../scripts/SoundManager":"SoundManager","../scripts/base/Data":"Data","../scripts/base/controller/GameController":"GameController","../scripts/fb/AdsManager":"AdsManager","./LevelSlider":"LevelSlider"}],GameMode:[function(t,e,o){"use strict";cc._RF.push(e,"22e7bG2dnZGl5fyuhNENJHX","GameMode");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../scripts/EnumContainer"),a=t("../../scripts/Global"),s=t("../../scripts/base/Data"),l=t("../../scripts/base/Config"),p=t("../../scripts/base/DataFacebook"),u=t("../../scripts/Profile/Profile"),d=t("../../customization/GameCustomization"),h=t("../../scripts/pooling/NodePool"),f=cc._decorator,y=f.ccclass,v=f.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pieceContainer=null,e.piecePrefab=null,e.picture=null,e.loading=null,e.fireworkPrefab=null,e.frame=null,e.avatar=null,e._level=d.Level._3X3,e._mode=c.Mode.SWAP,e._totalPiece=0,e._widthPiece=0,e._heightPiece=0,e._coordinate=[],e._isFrame=!1,e.firework=null,e.result=null,e.game=null,e}return r(e,t),e.prototype.onLoad=function(){this.loading.active=!1},e.prototype.onEnable=function(){this._mode=a.default.currentMode,this.reStartGame(),this.picture.spriteFrame=a.default.selectedPicture},e.prototype.reStartGame=function(){this.getInfoFrame(a.default.selectedPicture.name),this._level=a.default.currentLevel,this.init(this._mode,this._level),this.startGame(),this.game.btnHint.active=!0},e.prototype.init=function(t,e){switch(this._level=e,this._mode=t,this._level){case d.Level._3X3:this._widthPiece=this.node.width/3,this._totalPiece=9;break;case d.Level._4X4:this._widthPiece=this.node.width/4,this._totalPiece=16;break;case d.Level._5X5:this._widthPiece=this.node.width/5,this._totalPiece=25;break;case d.Level._6X6:this._widthPiece=this.node.width/6,this._totalPiece=36}this._heightPiece=this._widthPiece,this._coordinate=this.calculateTheCoordinatesOfPiece(this._widthPiece,this._heightPiece),this.initByMode(),this.addEventTouchAllPiece(),this.picture.spriteFrame=a.default.selectedPicture,this.frame.spriteFrame=this.picture.spriteFrame,this.activeFrame()},e.prototype.initByMode=function(){},e.prototype.removeAllPiece=function(){for(;;){var t=this.pieceContainer.children[0];if(!t)break;h.default.put(h.TypePool.SWAPPING_PIECE,t)}},e.prototype.calculateTheCoordinatesOfPiece=function(){for(var t=Math.sqrt(this._totalPiece),e=this._widthPiece*t,o=-(Math.round(e/2)-this._widthPiece/2),n=Math.round(e/2)-this._widthPiece/2,r=[],i=0;i<this._totalPiece;++i){var c=cc.v3(o,n);r.push(c),o+=this._widthPiece,(i+1)%t==0&&(o=-(Math.round(e/2)-this._widthPiece/2),n-=this._widthPiece)}return r},e.prototype.addPiecePosition=function(t){this.pieceContainer.children.map(function(e,o){e.getComponent("Piece").originalCoordinate=t[o],e.position=t[o]})},e.prototype.onWin=function(t){var e=this;this.result?(this.result.node.active=!1,t&&t(null,this.result)):cc.resources.load("result/result",cc.Prefab,function(o,n){o&&console.error(o);var r=cc.instantiate(n);e.result=r.getComponent("Result"),t&&t(o,e.result)})},e.prototype.onClickPiece=function(){},e.prototype.resetZIndexToZero=function(){for(var t=this.pieceContainer.children,e=0;e<t.length;++e)t[e].zIndex=cc.macro.ZERO},e.prototype.isCorrect=function(t){var e=t.node.position,o=t.originalCoordinate;return Math.abs(e.x-o.x)<10&&Math.abs(e.y-o.y)<10},e.prototype.sortZIndexAllPiece=function(){for(var t=this.pieceContainer.children,e=0;e<t.length;++e){var o=t[e].getComponent("Piece").isCorrect;t[e].zIndex=o?cc.macro.ZERO:cc.macro.ONE}},e.prototype.startGame=function(){},e.prototype.addEventTouchAllPiece=function(){this.pieceContainer.children.map(function(t){t.getComponent("Piece").addEventCustom()})},e.prototype.addExperience=function(t){switch(t){case d.Level._3X3:s.default.userData.level.totalExp+=l.LevelConfig._3x3.exp;break;case d.Level._4X4:s.default.userData.level.totalExp+=l.LevelConfig._4x4.exp;break;case d.Level._5X5:s.default.userData.level.totalExp+=l.LevelConfig._5x5.exp;break;case d.Level._6X6:s.default.userData.level.totalExp+=l.LevelConfig._6x6.exp}(new p.default).setData(c.DataKey.FACEBOOK,s.default.userData),u.default.getInstance().updateLevel()},e.prototype.showResult=function(t){this.result.node.parent||(this.game.node.addChild(t.node),t.node.zIndex=cc.macro.MAX_ZINDEX-1),t.node.active=!0,t.txtTime.string=this.game.time.countTime.string},e.prototype.showFirework=function(){var t=this;this.firework?this.firework.active=!0:(this.firework=cc.instantiate(this.fireworkPrefab),this.firework.zIndex=cc.macro.MAX_ZINDEX-1,this.firework.active=!0,this.node.addChild(this.firework)),this.scheduleOnce(function(){t.firework.active=!1},3)},e.prototype.activeFrame=function(){a.default.isFrame?(this._isFrame=!0,this.frame.node.active=!0,this.avatar.node.active=!0,this.setPicture()):(this._isFrame=!1,this.frame.node.active=!1,this.avatar.node.active=!1)},e.prototype.setPicture=function(){var t=a.default.frame;this.avatar.spriteFrame=a.default.avatarPlayer,this.avatar.node.angle=t.angle,this.frame.node.width=1020,this.frame.node.height=1020;var e=t.size;this.avatar.node.setContentSize(cc.size(e.x,e.y)),this.avatar.node.x=t.position.x,this.avatar.node.y=t.position.y},e.prototype.getInfoFrame=function(t){var e=this;s.default.userData.collections.map(function(o){"frame"==o.name&&o.played.map(function(o){if(o.name==t&&o.frame){a.default.frame=o.frame,e.avatar.node.setPosition(o.frame.position),e.avatar.node.angle=o.frame.angle,e.frame.node.width=1020,e.frame.node.height=1020;var n=o.frame.size;e.avatar.node.setContentSize(cc.size(n.x,n.y))}})})},i([v(cc.Node)],e.prototype,"pieceContainer",void 0),i([v(cc.Prefab)],e.prototype,"piecePrefab",void 0),i([v(cc.Sprite)],e.prototype,"picture",void 0),i([v(cc.Node)],e.prototype,"loading",void 0),i([v(cc.Prefab)],e.prototype,"fireworkPrefab",void 0),i([v(cc.Sprite)],e.prototype,"frame",void 0),i([v(cc.Sprite)],e.prototype,"avatar",void 0),i([y],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../customization/GameCustomization":"GameCustomization","../../scripts/EnumContainer":"EnumContainer","../../scripts/Global":"Global","../../scripts/Profile/Profile":"Profile","../../scripts/base/Config":"Config","../../scripts/base/Data":"Data","../../scripts/base/DataFacebook":"DataFacebook","../../scripts/pooling/NodePool":"NodePool"}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"91413GJL3FGkqq8nXpnzbG2","Game");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../scripts/base/controller/GameController"),a=t("../../scripts/EnumContainer"),s=t("../../scripts/Global"),l=t("./CountingTime"),p=t("../../scripts/fb/FBSDK"),u=t("../../scripts/base/Data"),d=t("../../scripts/fb/AdsManager"),h=t("../../scripts/base/DataFacebook"),f=t("../../scripts/SoundManager"),y=cc._decorator,v=y.ccclass,_=y.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listPiece=null,e.swappingPrefab=null,e.draggingPrefab=null,e.center=null,e.buttonEndGame=null,e.time=null,e.bestTime=null,e.block=null,e.btnHint=null,e.numberHint=null,e.iconAds=null,e.btnView=null,e.shadow=null,e.mode=null,e._swapping=null,e._dragging=null,e._numberHint=0,e}var o;return r(e,t),o=e,e.getInstance=function(){return o._instance},e.prototype.onEnable=function(){o._instance=this,this.shadow.node.active=!1,this.buttonEndGame.active=!1,this.addGameMode(s.default.currentMode),this.block.zIndex=cc.macro.MAX_ZINDEX-1,this.block.active=!1;var t=u.default.userData;0===t.hint?(this.numberHint.node.active=!1,this.iconAds.node.active=!0):(this._numberHint=t.hint,this.numberHint.string=""+this._numberHint),s.default.currentMode==a.Mode.SWAP?this.btnView.color=new cc.Color(150,150,150):this.btnView.color=new cc.Color(255,255,255)},e.prototype.onBack=function(){f.default.getInstance().playSound(f.Sound.CLICK,!1,1),c.default.getInstance().gameCustomization.node.active=!1,c.default.getInstance().currentTab.node.active=!0,c.default.getInstance().topContainer.active=!0,c.default.getInstance().botContainer.active=!0,this.node.active=!1},e.prototype.onHint=function(){var t=this;f.default.getInstance().playSound(f.Sound.CLICK,!1,1),this._numberHint>0?(--this._numberHint,this.numberHint.string=""+this._numberHint,u.default.userData.hint=this._numberHint,(new h.default).setData(a.DataKey.FACEBOOK,u.default.userData),this.mode.onHint(),0==this._numberHint&&(this.numberHint.node.active=!1,this.iconAds.node.active=!0)):(console.log("show ads"),d.default.getInstance().showRewardedAds(function(e){if(e&&console.error(e),!e){var o=u.default.userData;o.hint=3,(new h.default).setData(a.DataKey.FACEBOOK,o,function(){t._numberHint=3,t.numberHint.string=""+t._numberHint,t.iconAds.node.active=!1,t.numberHint.node.active=!0})}}))},e.prototype.onView=function(){var t=this;f.default.getInstance().playSound(f.Sound.CLICK,!1,1);var e=this.mode.picture.node;e.active?(cc.tween(e).to(.3,{opacity:0}).call(function(){e.active=!1}).start(),this.mode.content.parent.parent.active=!0,cc.tween(this.mode.content.parent.parent).to(.3,{opacity:255}).start(),this.mode.pieceContainer.active=!0):(e.active=!0,cc.tween(e).to(.3,{opacity:255}).start(),cc.tween(this.mode.content.parent.parent).to(.3,{opacity:0}).call(function(){t.mode.content.parent.parent.active=!1}).start(),this.mode.pieceContainer.active=!1)},e.prototype.onSettings=function(){f.default.getInstance().playSound(f.Sound.CLICK,!1,1),c.default.getInstance().openSettings()},e.prototype.onShare=function(){f.default.getInstance().playSound(f.Sound.CLICK,!1,1),p.default.getInstance().shareGame()},e.prototype.onNextPicture=function(){var t=this;f.default.getInstance().playSound(f.Sound.CLICK,!1,1);var e=JSON.parse(this.getNameAndIndex()),o=e.name,n=e.index;""===o?cc.resources.load("collections/daily/"+s.default.monthName+"/"+(Number(s.default.date)+1),cc.SpriteFrame,function(e,o){t.mode.loading.active=!1,e?console.error(e):Number(s.default.date)+1>(new Date).getDate()||(s.default.selectedPicture=o,t.mode.reStartGame(),t.time.startCountingTime(),t.buttonEndGame.active=!1,s.default.date+=1)}):cc.resources.load("collections/"+o+"/"+o+n,cc.SpriteFrame,function(e,o){t.mode.loading.active=!1,e?console.error(e):(s.default.selectedPicture=o,t.mode.reStartGame(),t.time.startCountingTime(),t.buttonEndGame.active=!1)})},e.prototype.getNameAndIndex=function(){var t="",e=null,o=s.default.selectedPicture.name;for(this.mode.loading.active=!0,t=o.split(new RegExp("[0-9]"))[0],e=++(e=o.split(new RegExp("[a-z]")))[e.length-1];this.isIndexInCollection(t,e)||(t=this.getNextCollection(t),e=0),this.isLocked(t,e);)++e;var n={name:t,index:e};return JSON.stringify(n)},e.prototype.isIndexInCollection=function(t,e){var o=u.default.userData,n=!0;return o.collections.map(function(o){o.name==t&&(n=o.total>e)}),n},e.prototype.getNextCollection=function(t){var e=u.default.userData,o=0;return e.collections.map(function(e,n){e.name==t&&(o=n)}),o==e.collections.length-1&&(o=0),e.collections[o+1].name},e.prototype.isLocked=function(t,e){var o=u.default.userData,n=!1;return o.collections.map(function(o){if(o.name==t){var r=t+e;o.locked.map(function(t){t.name==r&&(n=!0)})}}),n},e.prototype.addGameMode=function(t){this.mode&&(this.mode.node.active=!1),t==a.Mode.SWAP?this._swapping?(this.mode=this._swapping,this._dragging&&(this._dragging.node.active=!1)):(this._swapping=cc.instantiate(this.swappingPrefab).getComponent("GameMode"),this.mode=this._swapping,this.mode.game=this,this.center.addChild(this.mode.node)):t==a.Mode.DRAG&&(this._dragging?(this.mode=this._dragging,this._swapping&&(this._swapping.node.active=!1)):(this._dragging=cc.instantiate(this.draggingPrefab).getComponent("GameMode"),this.mode=this._dragging,this.mode.game=this,this.center.addChild(this.mode.node))),this.mode.node.active=!0},e.prototype.appearShadow=function(t){t?(this.shadow.node.active=!0,this.shadow.play("shadowOn")):this.shadow.play("shadowOff")},e._instance=null,i([_(cc.Node)],e.prototype,"listPiece",void 0),i([_(cc.Prefab)],e.prototype,"swappingPrefab",void 0),i([_(cc.Prefab)],e.prototype,"draggingPrefab",void 0),i([_(cc.Node)],e.prototype,"center",void 0),i([_(cc.Node)],e.prototype,"buttonEndGame",void 0),i([_(l.default)],e.prototype,"time",void 0),i([_(cc.Label)],e.prototype,"bestTime",void 0),i([_(cc.Node)],e.prototype,"block",void 0),i([_(cc.Node)],e.prototype,"btnHint",void 0),i([_(cc.Label)],e.prototype,"numberHint",void 0),i([_(cc.Sprite)],e.prototype,"iconAds",void 0),i([_(cc.Node)],e.prototype,"btnView",void 0),i([_(cc.Animation)],e.prototype,"shadow",void 0),o=i([v],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../scripts/EnumContainer":"EnumContainer","../../scripts/Global":"Global","../../scripts/SoundManager":"SoundManager","../../scripts/base/Data":"Data","../../scripts/base/DataFacebook":"DataFacebook","../../scripts/base/controller/GameController":"GameController","../../scripts/fb/AdsManager":"AdsManager","../../scripts/fb/FBSDK":"FBSDK","./CountingTime":"CountingTime"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"4af9d56sQ9NpolmDmWNpXgX","Global");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.selectedPicture=null,e.currentMode=null,e.currentLevel=null,e.pictureName=null,e.avatarPlayer=null,e.frame={},e.isFrame=!1,e.monthName="",e.date=1,i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Guide:[function(t,e,o){"use strict";cc._RF.push(e,"3fb46P/CdNExb6uKJHS1lp/","Guide");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../scripts/EnumContainer"),a=t("../scripts/SoundManager"),s=t("../scripts/base/DataFacebook"),l=t("../scripts/base/Data"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hand=null,e.piece=[],e.firework=null,e}return r(e,t),e.prototype.onEnable=function(){this.hand.play("tutorial1"),this.piece[0].on(cc.Node.EventType.TOUCH_END,this.onTouchPiece1,this),this.piece[1].zIndex=cc.macro.ONE,this.piece[0].zIndex=cc.macro.MAX_ZINDEX-1,l.default.userData.firstPlay=(new Date).getTime()},e.prototype.onTouchPiece1=function(t){this.hand.play("tutorial2"),a.default.getInstance().playSound(a.Sound.CLICK,!1,1),t.target.getComponent(cc.Animation).play(c.Effect.SELECTED),this.piece[1].on(cc.Node.EventType.TOUCH_END,this.onTouchPiece2,this)},e.prototype.onTouchPiece2=function(){var t=this;this.hand.stop("tutorial2"),this.hand.node.active=!1,a.default.getInstance().playSound(a.Sound.CLICK,!1,1),cc.tween(this.piece[0]).to(.5,{position:this.piece[1].position,scale:1},{easing:"cubicOut"}).call(function(){t.piece[0].getChildByName("border").getComponent(cc.Graphics).clear(),t.piece[1].getChildByName("border").getComponent(cc.Graphics).clear(),t.piece[0].getChildByName("whiteLight").getComponent(cc.Animation).play(c.Effect.BLINK),t.piece[1].getChildByName("whiteLight").getComponent(cc.Animation).play(c.Effect.BLINK),(new s.default).setData(c.DataKey.FACEBOOK,l.default.userData)}).delay(.5).call(function(){t.node.on(cc.Node.EventType.TOUCH_END,function(){t.node.active=!1},t),cc.resources.load("firework/firework",cc.Prefab,function(e,o){var n=cc.instantiate(o);t.firework.addChild(n),a.default.getInstance().playSound(a.Sound.WIN,!1,1),t.scheduleOnce(function(){n.destroy()},3),t.scheduleOnce(function(){t.node.destroy()},4)})}).start(),cc.tween(this.piece[1]).to(.5,{position:this.piece[0].position,scale:1},{easing:"cubicOut"}).start()},i([d(cc.Animation)],e.prototype,"hand",void 0),i([d([cc.Node])],e.prototype,"piece",void 0),i([d(cc.Node)],e.prototype,"firework",void 0),i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../scripts/EnumContainer":"EnumContainer","../scripts/SoundManager":"SoundManager","../scripts/base/Data":"Data","../scripts/base/DataFacebook":"DataFacebook"}],ITab:[function(t,e,o){"use strict";cc._RF.push(e,"de902ZluHJJtr09kkofjOZ0","ITab"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],InnerScrollView:[function(t,e,o){"use strict";cc._RF.push(e,"c8da1xggwVE9KW7/eiPranT","InnerScrollView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./OuterScrollView"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outerScrollView=null,e}return r(e,t),e.prototype.setOuterScrollView=function(t){this.outerScrollView=t},e.prototype._onTouchMoved=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var o=t.touch,n=o.getLocation().sub(o.getStartLocation());if(this.content&&(this.outerScrollView.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(o)),this.cancelInnerEvents){if(n.mag()>7&&!this._touchMoved&&t.target!==this.node){var r=new cc.Event.EventTouch(t.getTouches(),t.bubbles);r.type=cc.Node.EventType.TOUCH_CANCEL,r.touch=t.touch,r.simulate=!0,t.target.dispatchEvent(r),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},i([l(c.default)],e.prototype,"outerScrollView",void 0),i([s],e)}(cc.ScrollView);o.default=p,cc._RF.pop()},{"./OuterScrollView":"OuterScrollView"}],ItemBase:[function(t,e,o){"use strict";cc._RF.push(e,"e13fedv9AhJCIqhzmcN2pKV","ItemBase");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TypeItem=void 0;var c,a=t("../Global"),s=t("../SoundManager"),l=t("../SoundManager"),p=cc._decorator,u=p.ccclass,d=p.property;(function(t){t[t.COLLECTION=0]="COLLECTION",t[t.PICTURE=1]="PICTURE"})(c=o.TypeItem||(o.TypeItem={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picture=null,e.lock=null,e.mask=null,e.loading=null,e.type=c.PICTURE,e._tempPos=null,e._pictureName=null,e.collectionName=null,e.controller=null,e.unLock=!0,e}return r(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onClick,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onClick,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this)},e.prototype.onClick=function(t){if(this.unLock)switch(t.getType()){case cc.Node.EventType.TOUCH_START:this._tempPos=t.getLocation();break;case cc.Node.EventType.TOUCH_END:var e=t.getLocation();Math.abs(this._tempPos.x-e.x)<10&&Math.abs(this._tempPos.y-e.y)<10&&(s.default.getInstance().playSound(l.Sound.CLICK,!1,1),this.type==c.PICTURE?(a.default.selectedPicture=this.picture.spriteFrame,this.controller.openGameCustomization()):this.type==c.COLLECTION&&this.controller.openCollection(this))}},e.prototype.setPicture=function(t){this.picture.spriteFrame=t;var e=this.mask.node;this.picture.node.width=e.width,this.picture.node.height=e.height},e.prototype.getPictureName=function(){return this._pictureName},i([d(cc.Sprite)],e.prototype,"picture",void 0),i([d(cc.Sprite)],e.prototype,"lock",void 0),i([d(cc.Mask)],e.prototype,"mask",void 0),i([d(cc.Node)],e.prototype,"loading",void 0),i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Global":"Global","../SoundManager":"SoundManager"}],LevelSlider:[function(t,e,o){"use strict";cc._RF.push(e,"904cfiiWsZLG5v6jnSMlCnE","LevelSlider");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./GameCustomization"),a=t("../scripts/base/Config"),s=t("./GameCustomization"),l=t("../scripts/Global"),p=t("../scripts/SoundManager"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameCustomization=null,e.pageView=null,e.txtLevel=null,e.txtMoney=null,e._currentPage=0,e}return r(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEvent,this),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this.onTouchEvent,this),this.pageView.node.on("page-turning",this.onPageTurning,this),this.pageView.setCurrentPageIndex(0)},e.prototype.onTouchEvent=function(t){switch(t.getType()){case cc.Node.EventType.TOUCH_START:this.pageView._onTouchBegan(t);break;case cc.Node.EventType.TOUCH_MOVE:this.pageView._onTouchMoved(t);break;case cc.Node.EventType.TOUCH_CANCEL:this.pageView._onTouchCancelled(t);break;case cc.Node.EventType.TOUCH_END:this.pageView._onTouchEnded(t);break;case cc.Node.EventType.MOUSE_WHEEL:this.pageView._onMouseWheel(t)}},e.prototype.onPageTurning=function(t){p.default.getInstance().playSound(p.Sound.CLICK,!1,1);var e=t._curPageIdx;this.updateLevelAndMoney(e)},e.prototype.updateLevelAndMoney=function(t){switch(t){case 0:this.gameCustomization.onChangeLevel(c.Level._3X3),this.txtLevel.string=a.LevelConfig._3x3.name,this.txtMoney.string="+"+a.LevelConfig._3x3.bonus,l.default.currentLevel=c.Level._3X3;break;case 1:this.gameCustomization.onChangeLevel(c.Level._4X4),this.txtLevel.string=a.LevelConfig._4x4.name,this.txtMoney.string="+"+a.LevelConfig._4x4.bonus,l.default.currentLevel=c.Level._4X4;break;case 2:this.gameCustomization.onChangeLevel(c.Level._5X5),this.txtLevel.string=a.LevelConfig._5x5.name,this.txtMoney.string="+"+a.LevelConfig._5x5.bonus,l.default.currentLevel=c.Level._5X5;break;case 3:this.gameCustomization.onChangeLevel(c.Level._6X6),this.txtLevel.string=a.LevelConfig._6x6.name,this.txtMoney.string="+"+a.LevelConfig._6x6.bonus,l.default.currentLevel=c.Level._6X6}},e.prototype.update=function(){},e.prototype.scrollToPage=function(t,e){switch(e=Number(e)){case 0:this.pageView.scrollToPage(0,.5);break;case 1:this.pageView.scrollToPage(1,.5);break;case 2:this.pageView.scrollToPage(2,.5);break;case 3:this.pageView.scrollToPage(3,.5)}},i([h(s.default)],e.prototype,"gameCustomization",void 0),i([h(cc.PageView)],e.prototype,"pageView",void 0),i([h(cc.Label)],e.prototype,"txtLevel",void 0),i([h(cc.Label)],e.prototype,"txtMoney",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../scripts/Global":"Global","../scripts/SoundManager":"SoundManager","../scripts/base/Config":"Config","./GameCustomization":"GameCustomization"}],LibraryController:[function(t,e,o){"use strict";cc._RF.push(e,"86b19aEwz5Iv5bS57WZwTEf","LibraryController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../scripts/base/Data"),a=t("../../scripts/item/PictureItem"),s=t("../../scripts/base/BaseController"),l=t("../../scripts/pooling/NodePool"),p=t("../../scripts/base/controller/GameController"),u=cc._decorator,d=u.ccclass,h=u.property,f={},y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.pictureItem=null,e._loadedPicture=[],e._totalPictureAllCollection=0,e}return r(e,t),e.prototype.onLoad=function(){var t=this,e=c.default.userData;this.initLoadedArr(),console.log(f),this.mixLoadedArr(),console.log(f),e.collections.map(function(e){t._totalPictureAllCollection+=e.total})},e.prototype.onEnable=function(){this.scrollView.node.on("bounce-bottom",this.onBounceBottom,this)},e.prototype.onDisable=function(){this.scrollView.node.off("bounce-bottom",this.onBounceBottom,this),this.node.off("size-changed")},e.prototype.onBounceBottom=function(){this.initAllItem()},e.prototype.start=function(){var t=this;this.initAllItem(10);var e=this.node.height;this.node.on("size-changed",function(){var o=e-t.node.height;t.content.y-=o},this)},e.prototype.autoSetContentPos=function(){},e.prototype.initAllItem=function(){for(var t=this.getAllCollectionName(),e=(c.default.userData,0);e<10;++e){var o=t[Math.floor(Math.random()*t.length)],n=f[o].pop();if(n){var r=o+n;this._loadedPicture.push(r),this.createAndAddChild(o,n)}}},e.prototype.createAndAddChild=function(t,e){var o=l.default.get(l.TypePool.PICTURE),n=o.getComponent(a.default);n.controller=this;var r=p.default.getInstance().getSpriteFrame(t,t+e);return r?n.loadPictureStatic(t,r):n.loadPicture(t,e.toString()),this.content.addChild(o),n},e.prototype.onClick=function(e){t.prototype.onClick.call(this,e)},e.prototype.getAllCollectionName=function(){for(var t=c.default.userData.collections,e=[],o=0;o<t.length;++o)e.push(t[o].name);return["christmas","candy","animals","food","color"]},e.prototype.initLoadedArr=function(){for(var t=c.default.userData.collections,e=0;e<t.length;++e){var o=t[e].name;if("frame"!==o)for(var n=t[e].total,r=0;r<n;++r)f[o]?f[o].push(""+r):f[o]=[""+r]}},e.prototype.mixLoadedArr=function(){for(var t=c.default.userData.collections,e=0;e<t.length;++e){var o=t[e].name;if("frame"!==o){for(var n=Math.floor(Math.random()*f[o].length),r=Math.floor(Math.random()*f[o].length);n===r;)r=Math.floor(Math.random()*f[o].length);for(var i=0;i<f[o].length;){var a=Math.floor(Math.random()*f[o].length),s=Math.floor(Math.random()*f[o].length),l=f[o][a];f[o][a]=f[o][s],f[o][s]=l,++i}}}},i([h(cc.ScrollView)],e.prototype,"scrollView",void 0),i([h(cc.Prefab)],e.prototype,"pictureItem",void 0),i([d],e)}(s.default);o.default=y,cc._RF.pop()},{"../../scripts/base/BaseController":"BaseController","../../scripts/base/Data":"Data","../../scripts/base/controller/GameController":"GameController","../../scripts/item/PictureItem":"PictureItem","../../scripts/pooling/NodePool":"NodePool"}],ListCollection:[function(t,e,o){"use strict";cc._RF.push(e,"1b86bm7p4JHDb/CL4NiK2F7","ListCollection");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Data"),a=t("../item/ItemBase"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectionPrefab=null,e.content=null,e.controller=null,e}return r(e,t),e.prototype.onLoad=function(){this.initAllItem()},e.prototype.initAllItem=function(){var t=c.default.userData.collections;this.content.children.map(function(t){t.destroy()});for(var e=0;e<t.length;++e){var o=cc.instantiate(this.collectionPrefab),n=o.getComponent("CollectionItem");n.type=a.TypeItem.COLLECTION,n.controller=this.controller,n.init(t[e].name),this.content.addChild(o)}},i([p(cc.Prefab)],e.prototype,"collectionPrefab",void 0),i([p(cc.Node)],e.prototype,"content",void 0),i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../item/ItemBase":"ItemBase","./Data":"Data"}],ListPicture:[function(t,e,o){"use strict";cc._RF.push(e,"14d947SddZFdp9UBV/8BNzw","ListPicture");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Data"),a=t("../item/ItemBase"),s=t("../../library/scripts/LibraryController"),l=t("../SoundManager"),p=t("../pooling/NodePool"),u=t("./controller/GameController"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectionName=null,e._collectionName="",e._currentIndex=0,e.controller=null,e}return r(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){},e.prototype.setCollectionName=function(t){t&&(this._collectionName=t)},e.prototype.getCollectionName=function(){return this._collectionName},e.prototype.onBounceBottom=function(){this.generatePicture(this._collectionName)},e.prototype.generatePicture=function(t){for(var e,o=c.default.userData.collections,n=0;n<o.length;++n)o[n].name==t&&(e=o[n]);if(!(t===this.getCollectionName()&&this._currentIndex>=e.total))for(e.name!==this.getCollectionName()&&(this._currentIndex=0,this.clearContent()),this.collectionName.string=t.toUpperCase(),this.setCollectionName(t),n=0;n<10;++n){if(this._currentIndex==e.total)return;var r=p.default.get(p.TypePool.PICTURE),i=r.getComponent("PictureItem");i.controller=this,i.type=a.TypeItem.PICTURE;var s=u.default.getInstance().getSpriteFrame(this.getCollectionName(),this.getCollectionName()+this._currentIndex);s?i.loadPictureStatic(this.getCollectionName(),s):i.loadPicture(this.getCollectionName(),this._currentIndex),++this._currentIndex,this.content.addChild(r)}},e.prototype.onBack=function(){l.default.getInstance().playSound(l.Sound.CLICK,!1,1),this.controller.tabCollection.node.active=!0,this.node.active=!1},i([f(cc.Label)],e.prototype,"collectionName",void 0),i([h],e)}(s.default);o.default=y,cc._RF.pop()},{"../../library/scripts/LibraryController":"LibraryController","../SoundManager":"SoundManager","../item/ItemBase":"ItemBase","../pooling/NodePool":"NodePool","./Data":"Data","./controller/GameController":"GameController"}],MoveBG:[function(t,e,o){"use strict";cc._RF.push(e,"32530KgeOZN6budCag6DkAY","MoveBG");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background=null,e.time=0,e}return r(e,t),e.prototype.moveBG=function(t){cc.Tween.stopAllByTarget(this.background.node);var e=t.target.position;cc.tween(this.background.node).to(this.time,{position:e}).start()},i([s(cc.Sprite)],e.prototype,"background",void 0),i([s],e.prototype,"time",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],NodePool:[function(t,e,o){"use strict";cc._RF.push(e,"be1fbyrpBxDW5IF9t465cgI","NodePool");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TypePool=void 0;var c,a=cc._decorator,s=a.ccclass;a.property,function(t){t[t.PICTURE=0]="PICTURE",t[t.SWAPPING_PIECE=1]="SWAPPING_PIECE",t[t.DATE=2]="DATE"}(c=o.TypePool||(o.TypePool={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picturePool=new cc.NodePool,e.swappingPiecePool=new cc.NodePool,e.datePool=new cc.NodePool,e.picturePrefab=null,e.swappingPiecePrefab=null,e.dateItemPrefab=null,e}var o;return r(e,t),o=e,e.getInstance=function(){return o._instance||(o._instance=new o),o._instance},e.create=function(t,e,n){switch(t){case c.PICTURE:o.getInstance().picturePrefab=e;for(var r=0;r<n;++r)o.put(c.PICTURE,cc.instantiate(e));break;case c.SWAPPING_PIECE:for(o.getInstance().swappingPiecePrefab=e,r=0;r<n;++r)o.put(c.SWAPPING_PIECE,cc.instantiate(e));break;case c.DATE:for(o.getInstance().dateItemPrefab=e,r=0;r<n;++r)o.put(c.DATE,cc.instantiate(e))}},e.put=function(t,e){switch(t){case c.PICTURE:o.getInstance().picturePool.put(e);break;case c.SWAPPING_PIECE:o.getInstance().swappingPiecePool.put(e);break;case c.DATE:o.getInstance().datePool.put(e)}},e.get=function(t){switch(t){case c.PICTURE:return o.getInstance().getNodePicture();case c.SWAPPING_PIECE:return o.getInstance().getNodeSwappingPiece();case c.DATE:return o.getInstance().getNodeDate()}},e.clear=function(t){switch(t){case c.PICTURE:o.getInstance().picturePool.clear();break;case c.SWAPPING_PIECE:o.getInstance().swappingPiecePool.clear()}},e.prototype.getNodePicture=function(){return this.picturePool.size()>0?this.picturePool.get():cc.instantiate(this.picturePrefab)},e.prototype.getNodeSwappingPiece=function(){return this.swappingPiecePool.size()>0?this.swappingPiecePool.get():cc.instantiate(this.swappingPiecePrefab)},e.prototype.getNodeDate=function(){return this.datePool.size()>0?this.datePool.get():cc.instantiate(this.dateItemPrefab)},e._instance=null,o=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],OptimeScrollView:[function(t,e,o){"use strict";cc._RF.push(e,"93675v91c1IeLuqRpVkliOi","OptimeScrollView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=cc._decorator,s=a.ccclass,l=a.property;(function(t){t[t.ALL=0]="ALL",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL"})(c||(c={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainScrollView=null,e.view=null,e.content=null,e.direction=c.ALL,e}return r(e,t),e.prototype.update=function(){var t,e,o=this.content.children.length;switch(this.direction){case c.ALL:t=cc.rect(-this.content.x-this.view.width/2,-this.content.y-this.view.width/2,this.view.width,this.view.height);break;case c.HORIZONTAL:t=cc.rect(-this.content.x-this.view.width/2,-this.view.height/2,this.view.width,this.view.height);break;case c.VERTICAL:t=cc.rect(-this.view.width/2,-this.content.y-this.view.height/2,this.view.width,this.view.height)}for(var n=0;n<o;++n)e=this.content.children[n],t.intersects(e.getBoundingBox())?e.opacity=255:e.opacity=0},i([l(cc.ScrollView)],e.prototype,"mainScrollView",void 0),i([l(cc.Node)],e.prototype,"view",void 0),i([l(cc.Node)],e.prototype,"content",void 0),i([l({type:cc.Enum(c)})],e.prototype,"direction",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],OptimizeList:[function(t,e,o){"use strict";cc._RF.push(e,"f14db9LP+JAvJjDR2GHuQSU","OptimizeList");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.view=null,e.top=null,e.bot=null,e.content=null,e}return r(e,t),e.prototype.start=function(){this.content=cc.find("view/content/monthItem/list",this.node)},e.prototype.update=function(){for(var t=this.content.children.length,e=this.node.convertToWorldSpaceAR(this.top.position,cc.Canvas.instance.node.position),o=this.node.convertToWorldSpaceAR(this.bot.position,cc.Canvas.instance.node.position),n=0;n<t;++n){var r=this.content.children[n],i=this.node.convertToWorldSpaceAR(r.position,cc.Canvas.instance.node.position);0==n&&console.error(i.y),e.y+r.height/2>i.y&&o.y-r.height/2<i.y?r.opacity=255:r.opacity=0}},i([s(cc.Node)],e.prototype,"view",void 0),i([s(cc.Node)],e.prototype,"top",void 0),i([s(cc.Node)],e.prototype,"bot",void 0),i([s(cc.Node)],e.prototype,"content",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],OuterScrollView:[function(t,e,o){"use strict";cc._RF.push(e,"6c830AkHndJDKXUDcHz7sZE","OuterScrollView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.innerScrollView=[],e.planDir=null,e.scrollingInnerSv=null,e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.planDir=null,this.innerScrollView.forEach(function(e){e.setOuterScrollView(t)})},e.prototype._isHisChild=function(t,e){return t==e||null!=t.parent&&(t.parent==e||this._isHisChild(t.parent,e))},e.prototype._findScrollingInnerSv=function(t){for(var e=0;e<this.innerScrollView.length;e++)if(this._isHisChild(t,this.innerScrollView[e].node))return this.innerScrollView[e];return null},e.prototype.isDifferentBetweenSettingAndPlan=function(t){return!(0==this.planDir||1==this.planDir&&t.horizontal||-1==this.planDir&&t.vertical)},e.prototype._hasNestedViewGroup=function(t){if(t.eventPhase===cc.Event.CAPTURING_PHASE)return!1},e.prototype._onTouchBegan=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){this.planDir=null,this.scrollingInnerSv=null;var o=t.touch;this.content&&this._handlePressLogic(o),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)}},e.prototype._onTouchMoved=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var o=t.touch,n=o.getLocation().sub(o.getStartLocation());if(null==this.planDir&&n.mag()>7)if(this.scrollingInnerSv=this._findScrollingInnerSv(t.target),null!=this.scrollingInnerSv){var r=this.scrollingInnerSv.content.getContentSize(),i=this.scrollingInnerSv.node.getContentSize();this.scrollingInnerSv.vertical&&r.height>i.height||this.scrollingInnerSv.horizontal&&r.width>i.width?this.planDir=Math.abs(n.x)>Math.abs(n.y)?1:-1:this.planDir=0}else this.planDir=0;if(this.content&&(this.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(o)),this.cancelInnerEvents&&null==this.scrollingInnerSv){if(n.mag()>7&&!this._touchMoved&&t.target!==this.node){var c=new cc.Event.EventTouch(t.getTouches(),t.bubbles);c.type=cc.Node.EventType.TOUCH_CANCEL,c.touch=t.touch,c.simulate=!0,t.target.dispatchEvent(c),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},i([s([cc.ScrollView])],e.prototype,"innerScrollView",void 0),i([a],e)}(cc.ScrollView);o.default=l,cc._RF.pop()},{}],PictureItem:[function(t,e,o){"use strict";cc._RF.push(e,"6b307TtASZHrZ8k+FJz5cp9","PictureItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./ItemBase"),a=t("../EnumContainer"),s=t("../base/Data"),l=t("../fb/AdsManager"),p=t("../base/DataFacebook"),u=t("../SoundManager"),d=t("../pooling/NodePool"),h=t("../Global"),f=cc._decorator,y=f.ccclass,v=f.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addToFavorite=null,e.removeFromFavorite=null,e.avatar=null,e._picture=[],e.details=null,e}return r(e,t),e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.avatar&&(this.avatar.spriteFrame=h.default.avatarPlayer)},e.prototype.isFavorite=function(){return!!s.default.userData.favorite.includes(this._pictureName)},e.prototype.setItemState=function(t){switch(t){case a.ItemState.NORMAL:this.unLock=!0,this.addToFavorite.node.active=!0,this.removeFromFavorite.node.active=!1,this.lock&&(this.lock.node.active=!1);break;case a.ItemState.FAVORITE:this.addToFavorite.node.active=!1,this.removeFromFavorite.node.active=!0,this.lock&&(this.lock.node.active=!1);break;case a.ItemState.LOCK:this.unLock=!1,this.addToFavorite.node.active=!1,this.removeFromFavorite.node.active=!1,this.lock&&(this.lock.node.active=!0)}},e.prototype.loadPicture=function(t,e){var o=this;if(this._pictureName=t+e,this.isCurrentCollection(t))this.updateState();else{this.collectionName=t;var n=this._picture.indexOf(this._pictureName);n>=0?(this.setPicture(this._picture[n]),this.updateState()):(this.loading.active=!0,cc.resources.load("collections/"+t+"/"+this._pictureName,cc.SpriteFrame,function(e,n){if(e)console.error(e);else if(n.name===o._pictureName){if("frame"===t){o.avatar.node.active=!0;var r=o.findFrameInCollection(o._pictureName);r&&(o.avatar.node.width=r.frame.size.x,o.avatar.node.height=r.frame.size.y,o.avatar.node.position=r.frame.position,o.avatar.node.angle=r.frame.angle)}o._picture&&o._picture.push(n),o.setPicture(n),o.loading.active=!1,o.updateState()}}))}},e.prototype.loadPictureStatic=function(t,e){if(this._pictureName=e.name,this.isCurrentCollection(t))this.updateState();else{this.collectionName=t;var o=this._picture.indexOf(this._pictureName);if(o>=0)this.setPicture(this._picture[o]),this.updateState();else{if(e.name!==this._pictureName)return;if("frame"===t){this.avatar.node.active=!0;var n=this.findFrameInCollection(this._pictureName);n&&(this.avatar.node.width=n.frame.size.x,this.avatar.node.height=n.frame.size.y,this.avatar.node.position=n.frame.position,this.avatar.node.angle=n.frame.angle)}this._picture&&this._picture.push(e),this.setPicture(e),this.updateState()}}},e.prototype.findFrameInCollection=function(t){for(var e=s.default.userData.collections,o=0;o<e.length;++o)if("frame"==e[o].name)for(var n=e[o].played,r=0;r<n.length;++r)if(n[r].name==t)return n[r];return null},e.prototype.isCurrentCollection=function(t){return this.collectionName==t},e.prototype.onClick=function(e){t.prototype.onClick.call(this,e),h.default.selectedPicture=this.picture.spriteFrame},e.prototype.isLock=function(t){if(!t)return!1;for(var e=-1,o=s.default.userData.collections,n=0;n<o.length;++n)if(o[n].name==this.collectionName){e=n;break}if(-1!=e){var r=s.default.userData.collections[e].locked;for(n=0;n<r.length;++n)if(r[n].name==t)return!0;return!1}console.error("Not found collection with name: "+this.collectionName)},e.prototype.updateState=function(){this.isLock(this._pictureName)?this.setItemState(a.ItemState.LOCK):this.isFavorite(this._pictureName)?this.setItemState(a.ItemState.FAVORITE):this.setItemState(a.ItemState.NORMAL)},e.prototype.onUnlockPicture=function(){var t=this;u.default.getInstance().playSound(u.Sound.CLICK,!1,1),l.default.getInstance().showRewardedAds(function(e){if(e&&console.error(e),!e){var o=s.default.userData;o.collections.map(function(e){e.name==t.collectionName&&e.locked.map(function(o,n){o.name==t._pictureName&&e.locked.splice(n,1)})}),(new p.default).setData(a.DataKey.FACEBOOK,o),t.updateState()}})},e.prototype.onAddToFavorite=function(){u.default.getInstance().playSound(u.Sound.CLICK,!1,1);var t=s.default.userData;t.favorite.includes(this._pictureName)||(t.favorite.push(this._pictureName),(new p.default).setData(a.DataKey.FACEBOOK,t),s.default.userData=t),this.activeButtonAddFavorite(!1)},e.prototype.onRemoveFromFavorite=function(){var t=this;u.default.getInstance().playSound(u.Sound.CLICK,!1,1);var e=s.default.userData;e.favorite.includes(this._pictureName)&&(e.favorite.map(function(o,n){o==t._pictureName&&e.favorite.splice(n,1)}),(new p.default).setData(a.DataKey.FACEBOOK,e),s.default.userData=e,this.controller.node.name==a.Tab.FAVORITE&&d.default.put(d.TypePool.PICTURE,this.node),this.activeButtonAddFavorite(!0))},e.prototype.activeButtonAddFavorite=function(t){this.addToFavorite.node.active=t,this.removeFromFavorite.node.active=!t},i([v(cc.Sprite)],e.prototype,"addToFavorite",void 0),i([v(cc.Sprite)],e.prototype,"removeFromFavorite",void 0),i([v(cc.Sprite)],e.prototype,"avatar",void 0),i([y],e)}(c.default);o.default=_,cc._RF.pop()},{"../EnumContainer":"EnumContainer","../Global":"Global","../SoundManager":"SoundManager","../base/Data":"Data","../base/DataFacebook":"DataFacebook","../fb/AdsManager":"AdsManager","../pooling/NodePool":"NodePool","./ItemBase":"ItemBase"}],Piece:[function(t,e,o){"use strict";cc._RF.push(e,"2a380PCFohDQ4eIs6z5x3lC","Piece");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../customization/GameCustomization"),a=t("../../scripts/Convert/Convert"),s=t("../../scripts/EnumContainer"),l=t("../../scripts/Global"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=c.Level._3X3,e.mask=null,e.picture=null,e.anim=null,e.whiteLight=null,e.pieces=null,e.frame=null,e.avatar=null,e._set=!1,e.idPiece=null,e.gameMode=null,e.isCorrect=!1,e}return r(e,t),e.prototype.setGameMode=function(t){return this.gameMode=t,this},e.prototype.setId=function(t){return this.idPiece=t,this},e.prototype.setCorrect=function(t){return this.isCorrect=t,this},e.prototype.setMode=function(t){return this.level=t,this.node.getComponent("DrawBorder").drawBorder(),this},e.prototype.resize=function(t,e){return this.node.width=t,this.node.height=e,this},e.prototype.setPosition=function(t){return this.node.position=t,this.picture.node.position=a.default.convertCoordinate(this.picture.node,this.node.parent),this},e.prototype.addEventCustom=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchPiece,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchPiece,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchPiece,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchPiece,this)},e.prototype.removeEventCustom=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchPiece,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchPiece,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchPiece,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchPiece,this)},e.prototype.onTouchPiece=function(t){var e;switch(t.type){case cc.Node.EventType.TOUCH_START:this.gameMode.onClickPiece(this),e=new cc.Event.EventCustom(s.TouchPiece.TOUCH_START,!0);break;case cc.Node.EventType.TOUCH_MOVE:e=new cc.Event.EventCustom(s.TouchPiece.TOUCH_MOVE,!0);break;case cc.Node.EventType.TOUCH_END:e=new cc.Event.EventCustom(s.TouchPiece.TOUCH_END,!0)}this.node.dispatchEvent(e)},e.prototype.correct=function(){},e.prototype.setPicture=function(t){if(this.picture.spriteFrame=t,this.picture.node.width=this.gameMode.node.width,this.picture.node.height=this.gameMode.node.height,this._set||(this._set=!0,this.picture.node.setPosition(a.default.convertCoordinate(this.picture.node,this.gameMode.node))),this.activeFrame(),l.default.isFrame){var e=l.default.frame;this.avatar.spriteFrame=l.default.avatarPlayer,this.avatar.node.setPosition(e.position),this.avatar.node.angle=e.angle,this.frame.spriteFrame=this.picture.spriteFrame,this.frame.node.width=1020,this.frame.node.height=1020;var o=e.size;this.avatar.node.setContentSize(cc.size(o.x,o.y))}},e.prototype.activeFrame=function(){this.avatar.node.active=l.default.isFrame,this.frame.node.active=l.default.isFrame},i([d({type:cc.Enum(c.Level)})],e.prototype,"level",void 0),i([d(cc.Node)],e.prototype,"mask",void 0),i([d(cc.Sprite)],e.prototype,"picture",void 0),i([d(cc.Animation)],e.prototype,"anim",void 0),i([d(cc.Animation)],e.prototype,"whiteLight",void 0),i([d(cc.Node)],e.prototype,"pieces",void 0),i([d(cc.Sprite)],e.prototype,"frame",void 0),i([d(cc.Sprite)],e.prototype,"avatar",void 0),i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../customization/GameCustomization":"GameCustomization","../../scripts/Convert/Convert":"Convert","../../scripts/EnumContainer":"EnumContainer","../../scripts/Global":"Global"}],ProfileBase:[function(t,e,o){"use strict";cc._RF.push(e,"57ab2SWZUVAS7VI4pnRSJVv","ProfileBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=(n.ccclass,n.property,function(){this.profile=null});o.default=r,cc._RF.pop()},{}],ProfileFB:[function(t,e,o){"use strict";cc._RF.push(e,"bc37bjqxWhJjaeE8Bt2s39c","ProfileFB");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../ProfileBase"),a=t("../fb/FBSDK"),s=t("./Profile"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=t.call(this)||this;return e.profile=s.default.getInstance(),e}return r(e,t),e.prototype.setProfile=function(t){t&&(this.profile=t)},e.prototype.getAvatar=function(t){a.default.getInstance().getAvatarPlayer(function(e){e&&cc.assetManager.loadRemote(e,{type:".jpg"},function(e,o){e&&console.error(e),t&&t(o)})})},e.prototype.getDisplayName=function(t){a.default.getInstance().getPlayerName(function(e){t&&t(e)})},i([p],e)}(c.default));o.default=u,cc._RF.pop()},{"../ProfileBase":"ProfileBase","../fb/FBSDK":"FBSDK","./Profile":"Profile"}],ProfileManager:[function(t,e,o){"use strict";cc._RF.push(e,"be0a6X/vpNBp6OiNRmXwPBq","ProfileManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Profile:[function(t,e,o){"use strict";cc._RF.push(e,"db270fEMptD9aR5NTv9FDnj","Profile");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../base/Data"),a=t("./ProfileFB"),s=t("../Global"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.displayName=null,e.progressLevel=null,e.level=null,e.money=null,e.iconMoney=null,e.avatarDefault=null,e._nameDefault="Player",e._level=0,e._surplus=0,e.profileBase=null,e}var o;return r(e,t),o=e,e.getInstance=function(){return o._instance},e.prototype.onLoad=function(){o._instance=this,this.profileBase=new a.default,s.default.avatarPlayer=this.avatarDefault},e.prototype.onEnable=function(){var t=this;this.profileBase.getAvatar(function(e){e?t.setAvatar(new cc.SpriteFrame(e)):t.setAvatar(t.avatarDefault),s.default.avatarPlayer=t.avatar.spriteFrame}),this.profileBase.getDisplayName(function(e){t.setDisplayName(e)});var e=c.default.userData;this.updateTotalMoney(),this.level.string=""+this.getLevelCurrent(e.level.totalExp),this.updateLevel()},e.prototype.setAvatar=function(t){if(t){this.avatar.spriteFrame=t;var e=this.avatar.node.parent;this.avatar.node.width=e.width,this.avatar.node.height=e.height}},e.prototype.setDisplayName=function(t){this.displayName.string=t||this._nameDefault},e.prototype.getLevelCurrent=function(t){for(var e=1,o=0,n=t,r=30*e-10;n>r;)o+=r,n-=r,++e;return t==r?(this._surplus=0,++e):(this._surplus=t-o,e)},e.prototype.getLevel=function(t){for(var e=1,o=0;;){var n=30*e-10;if(t<n){o=t/n;break}t-=n,++e}return{level:e,percent:o}},e.prototype.updateTotalMoney=function(){this.money.string=""+c.default.userData.typeMoney.gold},e.prototype.animLevelUp=function(){var t=this,e=0,o=this.getLevelCurrent(c.default.userData.level.totalExp),n=o-this._level;this._level=o;var r=this.getTotalExpLevelCurrent(),i=this._surplus/r;this.schedule(function(){if(t.progressLevel.progress+=.008,0==n){if(t.progressLevel.progress>=i){if(1==i){var o=+t.level.string;t.level.string=(++o).toString(),t.progressLevel.progress=0}else t.progressLevel.progress=+i;t.unscheduleAllCallbacks()}}else t.progressLevel.progress>=1&&(++e,o=+t.level.string,t.level.string=(++o).toString(),t.progressLevel.progress=0),t.progressLevel.progress>=i&&e==n&&(t.progressLevel.progress=+i,t.unscheduleAllCallbacks())},1/60)},e.prototype.updateLevel=function(){var t=this.getLevel(c.default.userData.level.totalExp);this.progressLevel.progress=t.percent,this.level.string=""+t.level},e.prototype.getTotalExpLevelCurrent=function(){return 30*this._level-10},e.prototype.scaleIconMoney=function(){cc.Tween.stopAllByTarget(this.iconMoney.node),cc.tween(this.iconMoney.node).to(.2,{scale:.8}).to(.2,{scale:.7}).start()},e._instance=null,i([u(cc.Sprite)],e.prototype,"avatar",void 0),i([u(cc.Label)],e.prototype,"displayName",void 0),i([u(cc.ProgressBar)],e.prototype,"progressLevel",void 0),i([u(cc.Label)],e.prototype,"level",void 0),i([u(cc.Label)],e.prototype,"money",void 0),i([u(cc.Sprite)],e.prototype,"iconMoney",void 0),i([u(cc.SpriteFrame)],e.prototype,"avatarDefault",void 0),o=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Global":"Global","../base/Data":"Data","./ProfileFB":"ProfileFB"}],Result:[function(t,e,o){"use strict";cc._RF.push(e,"a4326fr/JdNV6UQb5wpPyjA","Result");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../scripts/base/Data"),a=t("../../scripts/Global"),s=t("../../customization/GameCustomization"),l=t("../../scripts/base/DataFacebook"),p=t("../../scripts/EnumContainer"),u=t("../../scripts/Profile/Profile"),d=t("../../scripts/fb/AdsManager"),h=t("../../scripts/base/Config"),f=t("../../scripts/SoundManager"),y=t("../../scripts/SoundManager"),v=t("../../game/scripts/Game"),_=cc._decorator,m=_.ccclass,g=_.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtTime=null,e.txtBonus=null,e.money=null,e.iconMoney=[],e.anim=null,e.firework=null,e._bonus=0,e}return r(e,t),e.prototype.onEnable=function(){y.default.getInstance().playSound(f.Sound.WIN,!1,1),this.anim.play(p.Effect.APPEAR);var t=0;switch(a.default.currentLevel){case s.Level._3X3:this.setIconMoney(this.iconMoney[0]),t=h.LevelConfig._3x3.bonus;break;case s.Level._4X4:this.setIconMoney(this.iconMoney[1]),t=h.LevelConfig._4x4.bonus;break;case s.Level._5X5:this.setIconMoney(this.iconMoney[2]),t=h.LevelConfig._5x5.bonus;break;case s.Level._6X6:this.setIconMoney(this.iconMoney[3]),t=h.LevelConfig._6x6.bonus}this.setBonus(t)},e.prototype.onClaim=function(){var t=this;y.default.getInstance().playSound(f.Sound.CLICK,!1,1),c.default.userData.typeMoney.gold+=this._bonus,(new l.default).setData(p.DataKey.FACEBOOK,c.default.userData,function(){u.default.getInstance().money.string=""+c.default.userData.typeMoney.gold,t.anim.play(p.Effect.DISAPPEAR),v.default.getInstance().appearShadow(!1),d.default.getInstance().showInterestialAds()})},e.prototype.onGetMore=function(){var t=this;y.default.getInstance().playSound(f.Sound.CLICK,!1,1),d.default.getInstance().showRewardedAds(function(e){e&&console.error(e),e||(c.default.userData.typeMoney.gold+=2*t._bonus,(new l.default).setData(p.DataKey.FACEBOOK,c.default.userData,function(){u.default.getInstance().money.string=""+c.default.userData.typeMoney.gold,t.anim.play(p.Effect.DISAPPEAR),v.default.getInstance().appearShadow(!1)}))})},e.prototype.setIconMoney=function(t){this.money.spriteFrame=t},e.prototype.setBonus=function(t){this._bonus=t,this.txtBonus.string="+"+t},e.prototype.onClose=function(){y.default.getInstance().playSound(f.Sound.CLICK,!1,1),this.node.active=!1},i([g(cc.Label)],e.prototype,"txtTime",void 0),i([g(cc.Label)],e.prototype,"txtBonus",void 0),i([g(cc.Sprite)],e.prototype,"money",void 0),i([g([cc.SpriteFrame])],e.prototype,"iconMoney",void 0),i([g(cc.Animation)],e.prototype,"anim",void 0),i([g(cc.Node)],e.prototype,"firework",void 0),i([m],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../../customization/GameCustomization":"GameCustomization","../../game/scripts/Game":"Game","../../scripts/EnumContainer":"EnumContainer","../../scripts/Global":"Global","../../scripts/Profile/Profile":"Profile","../../scripts/SoundManager":"SoundManager","../../scripts/base/Config":"Config","../../scripts/base/Data":"Data","../../scripts/base/DataFacebook":"DataFacebook","../../scripts/fb/AdsManager":"AdsManager"}],ScreenShot:[function(t,e,o){"use strict";cc._RF.push(e,"2f9a0CkdZVCOrW/ClQ0/Obw","ScreenShot");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],ScrollHorizontal:[function(t,e,o){"use strict";cc._RF.push(e,"ddee4OnWXNOGrb3uv9GRQCv","ScrollHorizontal");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.circle=null,e.txtLevel=null,e.txtBonus=null,e._originalPos=cc.Vec3.ZERO,e._finalPos=cc.Vec3.ZERO,e._tempPos=null,e}return r(e,t),e.prototype.onEnable=function(){this.content.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.content.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.content.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onDisable=function(){this.content.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.content.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.content.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){this._originalPos=this.node.convertToNodeSpaceAR(t.getLocation()),this._tempPos=null},e.prototype.onTouchMove=function(t){if(this._tempPos){var e=this.node.convertToNodeSpaceAR(t.getLocation()).x-this._tempPos.x;this.content.position=cc.v3(e,this._tempPos.y)}else this._tempPos=this.node.convertToNodeSpaceAR(t.getLocation())},e.prototype.onTouchEnd=function(t){this._finalPos=this.node.convertToNodeSpaceAR(t.getLocation())},i([s(cc.Node)],e.prototype,"content",void 0),i([s(cc.Node)],e.prototype,"circle",void 0),i([s(cc.Label)],e.prototype,"txtLevel",void 0),i([s(cc.Label)],e.prototype,"txtBonus",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Settings:[function(t,e,o){"use strict";cc._RF.push(e,"24a69E1SdRAwZ/pmmVvI4ZO","Settings");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=t("../scripts/base/Data"),s=t("../scripts/SoundManager"),l=t("../scripts/base/DataFacebook"),p=t("../scripts/EnumContainer"),u=t("../scripts/base/controller/GameController"),d=cc._decorator,h=d.ccclass,f=d.property;(function(t){t.ON="activeOn",t.OFF="activeOff"})(c||(c={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.soundAnim=null,e.musicAnim=null,e.snowAnim=null,e._sound=null,e._music=null,e._snow=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.anim.play(p.Effect.APPEAR)},e.prototype.start=function(){var t=a.default.userData.settings;this._sound=!t.sound,this._music=!t.music,this._snow=!t.snow,this.activeSound(),this.activeMusic(),this.activeSnow()},e.prototype.activeSound=function(){s.default.getInstance().playSound(s.Sound.CLICK,!1,1),this._sound=!this._sound,this._sound?(this.soundAnim.stop(c.OFF),this.soundAnim.play(c.ON)):(this.soundAnim.stop(c.ON),this.soundAnim.play(c.OFF)),this.saveSettings()},e.prototype.activeSnow=function(){s.default.getInstance().playSound(s.Sound.CLICK,!1,1),this._snow=!this._snow,this._snow?(this.snowAnim.stop(c.OFF),this.snowAnim.play(c.ON)):(this.snowAnim.stop(c.ON),this.snowAnim.play(c.OFF)),u.default.getInstance().snow.active=this._snow,this.saveSettings()},e.prototype.activeMusic=function(){s.default.getInstance().playSound(s.Sound.CLICK,!1,1),this._music=!this._music,this._music?(this.musicAnim.stop(c.OFF),this.musicAnim.play(c.ON)):(this.musicAnim.stop(c.ON),this.musicAnim.play(c.OFF));var t=s.default.getInstance()&&s.default.getInstance().soundID;if(this._music)if(0==t){var e=cc.audioEngine.resumeMusic();-1==Number(e)&&cc.audioEngine.playMusic(s.default.getInstance().background,!0)}else cc.audioEngine.playMusic(s.default.getInstance().background,!0);else cc.audioEngine.pauseMusic();this.saveSettings()},e.prototype.changeLanguage=function(t){s.default.getInstance().playSound(s.Sound.CLICK,!1,.5),t.node.name},e.prototype.saveSettings=function(){a.default.userData.settings={sound:this._sound,music:this._music,snow:this._snow};var t=new l.default,e=a.default.userData;t.setData(p.DataKey.FACEBOOK,e)},e.prototype.onClose=function(){this.node.active=!1},e.prototype.onBack=function(){s.default.getInstance().playSound(s.Sound.CLICK,!1,1),this.anim.play(p.Effect.DISAPPEAR)},i([f(cc.Animation)],e.prototype,"anim",void 0),i([f(cc.Animation)],e.prototype,"soundAnim",void 0),i([f(cc.Animation)],e.prototype,"musicAnim",void 0),i([f(cc.Animation)],e.prototype,"snowAnim",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../scripts/EnumContainer":"EnumContainer","../scripts/SoundManager":"SoundManager","../scripts/base/Data":"Data","../scripts/base/DataFacebook":"DataFacebook","../scripts/base/controller/GameController":"GameController"}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"a0c543xgw9NI5upk1FGY73O","SoundManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Sound=void 0;var c,a=t("./base/Data"),s=cc._decorator,l=s.ccclass,p=s.property;(function(t){t[t.CORRECT=0]="CORRECT",t[t.CLICK=1]="CLICK",t[t.WIN=2]="WIN",t[t.TICK=3]="TICK"})(c=o.Sound||(o.Sound={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background=null,e.correct=null,e.win=null,e.click=null,e.tick=null,e.soundID=null,e.musicID=null,e._isCorrect=!1,e}var o;return r(e,t),o=e,e.getInstance=function(){return o._instance},e.prototype.onLoad=function(){o._instance=this},e.prototype.start=function(){a.default.userData.settings.music&&this.background&&(this.musicID=cc.audioEngine.playMusic(this.background,!0))},e.prototype.playSound=function(t,e,o){var n=this;if(void 0===e&&(e=!1),void 0===o&&(o=1),a.default.userData.settings.sound)switch(t){case c.CLICK:cc.audioEngine.play(this.click,e,o);break;case c.CORRECT:this._isCorrect||(cc.audioEngine.play(this.correct,e,o),this._isCorrect=!0,this.scheduleOnce(function(){n._isCorrect=!1},.3));break;case c.TICK:cc.audioEngine.play(this.tick,e,o);break;case c.WIN:cc.audioEngine.play(this.win,e,o)}},e.prototype.pauseMusic=function(){this.musicID&&cc.audioEngine.pauseMusic()},e.prototype.resumeMusic=function(){this.musicID&&cc.audioEngine.resumeMusic()},e._instance=null,i([p(cc.AudioClip)],e.prototype,"background",void 0),i([p(cc.AudioClip)],e.prototype,"correct",void 0),i([p(cc.AudioClip)],e.prototype,"win",void 0),i([p(cc.AudioClip)],e.prototype,"click",void 0),i([p(cc.AudioClip)],e.prototype,"tick",void 0),o=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./base/Data":"Data"}],SwappingPiece:[function(t,e,o){"use strict";cc._RF.push(e,"f4ea8Re1vJNMIX+T4Trk9ci","SwappingPiece");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Piece"),a=t("../../scripts/EnumContainer"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphic=null,e}return r(e,t),e.prototype.correct=function(){this.graphic.clear(),this.whiteLight.play(a.Effect.BLINK),this.isCorrect=!0,this.removeEventCustom()},e.prototype.setPicture=function(e){this._set=!1,t.prototype.setPicture.call(this,e)},i([p(cc.Graphics)],e.prototype,"graphic",void 0),i([l],e)}(c.default);o.default=u,cc._RF.pop()},{"../../scripts/EnumContainer":"EnumContainer","./Piece":"Piece"}],Swapping:[function(t,e,o){"use strict";cc._RF.push(e,"48ef6Jem3xAZp7bct/w0cKM","Swapping");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../scripts/EnumContainer"),a=t("./GameMode"),s=t("../../scripts/Global"),l=t("../../scripts/SoundManager"),p=t("../../scripts/SoundManager"),u=t("../../customization/GameCustomization"),d=t("../../scripts/pooling/NodePool"),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.pieceStart=null,e.framePicture=null,e}return r(e,t),e.prototype.init=function(e,o){t.prototype.init.call(this,e,o),this.mixPiece(),this.bg.node.active=!0,this.picture.node.active=!1,this.game.btnView.active=!1},e.prototype.initByMode=function(){this.removeAllPiece();for(var t=0;t<this._totalPiece;++t){var e=d.default.get(d.TypePool.SWAPPING_PIECE);e.active=!0,e.getComponent("Piece").setId(t).setGameMode(this).setMode(this._level).resize(this._widthPiece,this._heightPiece).setCorrect(!1),this.pieceContainer.addChild(e)}this.addPiecePosition(this._coordinate),this.pieceContainer.children.map(function(t){t.getComponent("Piece").setPicture(s.default.selectedPicture)})},e.prototype.onClickPiece=function(t){var e=this,o=!1;this.pieceStart?this.pieceStart.idPiece==t.idPiece?(this.backNormalPiece(),this.pieceStart.node.zIndex=cc.macro.ONE,this.pieceStart=null):(t.node.zIndex=cc.macro.ONE,this.pieceStart.node.scale=1,this.pieceContainer.children.map(function(t){t.getComponent("Piece").removeEventCustom()}),this.swapPiece(t,function(){e.isCorrect(e.pieceStart)&&(e.pieceStart.correct(),l.default.getInstance().playSound(p.Sound.CORRECT,!1,1),o=!0),e.isCorrect(t)&&(t.correct(),o||l.default.getInstance().playSound(p.Sound.CORRECT,!1,1)),e.resetZIndexToZero(),e.sortZIndexAllPiece(),e.pieceStart=null,e.pieceContainer.children.map(function(t){var e=t.getComponent("Piece");e.isCorrect||e.addEventCustom()}),e.checkWin()&&(e.game.block.active=!0,e.game.btnView.active=!1,e.game.btnHint.active=!1,e.game.appearShadow(!0),e.showFirework(),e.game.time.stopCountingTime(),e.addExperience(u.Level._3X3),e.scheduleOnce(function(){e.onWin(function(t,o){t&&console.error(t),e.game.buttonEndGame.active=!0,e.game.block.active=!1,e.showResult(o),l.default.getInstance().pauseMusic(),l.default.getInstance().playSound(p.Sound.WIN,!1,.5),e.removeAllPiece(),e.bg.node.active=!1,e.picture.node.active=!0})},2))})):(this.pieceStart=t,this.scalePieceSelected(),this.pieceStart.node.zIndex=cc.macro.MAX_ZINDEX-1)},e.prototype.scalePieceSelected=function(){this.pieceStart.anim.play(c.Effect.SELECTED)},e.prototype.backNormalPiece=function(){this.pieceStart.anim.play(c.Effect.DESELECT)},e.prototype.checkWin=function(){for(var t=0;t<this.pieceContainer.children.length;++t)if(!this.pieceContainer.children[t].getComponent("Piece").isCorrect)return!1;return!0},e.prototype.createFramePicture=function(){if(this.framePicture)this.pieceContainer.addChild(this.framePicture);else{this.framePicture=new cc.Node,this.framePicture.name="framePicture";var t=this.framePicture.addComponent("DrawBorder"),e=this.framePicture.addComponent(cc.Graphics);t.root=this.pieceContainer,t.graphic=e,t.graphic.lineWidth=7,t.graphic.lineJoin=cc.Graphics.LineJoin.ROUND,t.graphic.strokeColor=cc.Color.WHITE,this.pieceContainer.addChild(this.framePicture)}return this.framePicture},e.prototype.swapPiece=function(t,e){var o=this;void 0===e&&(e=null);var n=this.pieceStart.node.position;this.pieceStart.removeEventCustom(),cc.tween(this.pieceStart.node).to(.5,{position:t.node.position,scale:1},{easing:"cubicOut"}).call(function(){o.pieceStart.addEventCustom(),e&&e()}).start(),t.removeEventCustom(),cc.tween(t.node).to(.5,{position:n},{easing:"cubicOut"}).start()},e.prototype.onHint=function(){for(var t=this.pieceContainer.children,e=function(){var e=Math.floor(Math.random()*t.length),o=t[e].getComponent("Piece");if(!o.isCorrect)return o.whiteLight.play("blink"),t.forEach(function(t){o.originalCoordinate.x==t.x&&o.originalCoordinate.y==t.y&&t.getComponent("Piece").whiteLight.play("blink")}),"break"};"break"!==e(););},e.prototype.mixPiece=function(){for(var t=this._coordinate.length,e=t,o=[];0!=this._coordinate.length;){var n=Math.floor(Math.random()*e);if(!o.includes(n)){var r=this.pieceContainer.children[n].position,i=this._coordinate[t-1];if(r.x==i.x&&r.y==i.y){1==this._coordinate.length&&(this.pieceContainer.children[n].position=this._coordinate.pop(),t=this._coordinate.length,o.push(n));continue}this.pieceContainer.children[n].position=this._coordinate.pop(),t=this._coordinate.length,o.push(n)}}},i([y(cc.Sprite)],e.prototype,"bg",void 0),i([f],e)}(a.default);o.default=v,cc._RF.pop()},{"../../customization/GameCustomization":"GameCustomization","../../scripts/EnumContainer":"EnumContainer","../../scripts/Global":"Global","../../scripts/SoundManager":"SoundManager","../../scripts/pooling/NodePool":"NodePool","./GameMode":"GameMode"}]},{},["Cheat","CheatListener","GameCustomization","LevelSlider","MoveBG","DateItem","FavoriteController","Coordinates","CountingTime","Dragging","DraggingPiece","Game","GameMode","Piece","Swapping","SwappingPiece","Guide","LibraryController","Result","ScreenShot","ActiveOff","ButtonContainer","Convert","DrawBorder","EnumContainer","Global","ITab","InnerScrollView","OptimeScrollView","OuterScrollView","ProfileBase","Profile","ProfileFB","ProfileManager","ScrollHorizontal","SoundManager","BaseController","CanvasSize","CaptureScreenShot","CollectionController","Config","DailyController","Data","DataFacebook","DataLocal","ListCollection","ListPicture","OptimizeList","GameController","AdsManager","FBSDK","CollectionItem","ItemBase","PictureItem","NodePool","Settings"]);