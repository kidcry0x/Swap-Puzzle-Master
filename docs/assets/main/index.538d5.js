window.__require=function e(t,r,n){function o(i,c){if(!r[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){return o(t[i][1][e]||e)},u,u.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)o(n[i]);return o}({LanguageData:[function(e,t){"use strict";cc._RF.push(t,"d8105PQhMRDy4ts9GNLtOdR","LanguageData");var r=e("polyglot.min"),n=null;function o(e){return window.i18n.languages[e]}function a(e){e&&(n?n.replace(e):n=new r({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{en:e("../i18n/en"),vn:e("../i18n/vn")},curLang:""}),window.i18n.curLang="en",window.i18n.languages[cc.sys.language]&&(window.i18n.curLang=cc.sys.language),console.log("Default language: "+cc.sys.language),a(o(window.i18n.curLang)||{}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=o(e)||{};window.i18n.curLang=e,a(t),this.inst=n}},t:function(e,t){if(n)return n.t(e,t)},inst:n,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],r=0;r<e.length;++r){var n=e[r].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,n)}for(var o=0;o<t.length;++o){var a=t[o];a.node.active&&a.updateLabel()}for(var i=[],c=0;c<e.length;++c){var s=e[c].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(i,s)}for(var l=0;l<i.length;++l){var u=i[l];u.node.active&&u.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"../i18n/en":"en","../i18n/vn":"vn","polyglot.min":"polyglot.min"}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"958ae2YqKFLiLctQRQmHxfT","LocalizedLabel");var r=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){r.inst||r.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?r.t(this.dataID)&&(this.label.string=r.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"0ceffetPb9AP5Ux2Z44Y/i6","LocalizedSprite");var r=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:r}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],Splash:[function(e,t,r){"use strict";cc._RF.push(t,"16f9dfrzuFMvLYlwOdWk7bS","Splash");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var i=e("../resources/scripts/base/Data"),c=e("../resources/scripts/EnumContainer"),s=e("../resources/scripts/base/DataFacebook"),l=e("../resources/scripts/base/Config"),u=e("../resources/scripts/pooling/NodePool"),p=e("../resources/scripts/base/controller/GameController"),f=cc._decorator,d=f.ccclass,h=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress=null,t.sceneName="",t.picture=null,t.library=null,t.daily=null,t.collection=null,t.game=null,t.loaded=[],t.collectionName=[],t._percent=0,t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.logContext(),(new s.default).getData(c.DataKey.FACEBOOK,function(t,r){t?console.error(t):(r.collections&&r.favorite&&r.hint?i.default.userData=r:e.replaceNewData(),e.updateData(),e.preloadScene(),e.preloadPrefab())})},t.prototype.start=function(){var e={library:this.library,daily:this.daily,collection:this.collection,game:this.game};window.prefab=e},t.prototype.preloadScene=function(){var e=this;console.time("loadScene"),cc.director.preloadScene(this.sceneName,function(t,r){var n=Number((t/r).toFixed(2));e._percent<n&&(e._percent=n),e.progress.progress=e._percent},function(){e.loaded.push(e.sceneName),e.progress.progress+=.01,e.initPooling(),cc.director.loadScene("newGame"),console.timeEnd("loadScene")})},t.prototype.replaceNewData=function(){i.default.userData=l.defaultData,(new s.default).setData(c.DataKey.FACEBOOK,i.default.userData)},t.prototype.initPooling=function(){cc.resources.load("prefabs/item/pictureItem",cc.Prefab,function(e,t){u.default.create(u.TypePool.PICTURE,t,10)}),cc.resources.load("daily/dateItem",cc.Prefab,function(e,t){u.default.create(u.TypePool.DATE,t,10)})},t.prototype.logContext=function(){console.log(p.VERSION),console.log(cc.sys.os),console.log("Canvas size: ",cc.view.getCanvasSize()),console.log("Frame size: ",cc.view.getFrameSize())},t.prototype.updateData=function(){for(var e=0;e<i.default.userData.collections.length;++e)if(i.default.userData.collections[e].name!=l.defaultData.collections[e].name)return void(i.default.userData=l.defaultData);for(e=0;e<i.default.userData.collections.length;++e)i.default.userData.collections[e].total===l.defaultData.collections[e].total?"frame"===i.default.userData.collections[e].name&&JSON.stringify(i.default.userData.collections[e].played)!==JSON.stringify(l.defaultData.collections[e].played)&&(i.default.userData.collections[e]=i.default.userData.collections[e]):i.default.userData.collections[e]=l.defaultData.collections[e]},t.prototype.preloadPrefab=function(){},t.prototype.preloadDir=function(){cc.resources.loadDir("collections/frame",cc.SpriteFrame),cc.resources.loadDir("collections/christmas",cc.SpriteFrame),cc.resources.loadDir("collections/avatar",cc.SpriteFrame),cc.resources.loadDir("collections/color",cc.SpriteFrame)},t.libraryPrefab=null,t.dailyPrefab=null,t.collectionPrefab=null,a([h(cc.ProgressBar)],t.prototype,"progress",void 0),a([h],t.prototype,"sceneName",void 0),a([h(cc.Sprite)],t.prototype,"picture",void 0),a([h(cc.Prefab)],t.prototype,"library",void 0),a([h(cc.Prefab)],t.prototype,"daily",void 0),a([h(cc.Prefab)],t.prototype,"collection",void 0),a([h(cc.Prefab)],t.prototype,"game",void 0),a([d],t)}(cc.Component);r.default=g,cc._RF.pop()},{"../resources/scripts/EnumContainer":void 0,"../resources/scripts/base/Config":void 0,"../resources/scripts/base/Data":void 0,"../resources/scripts/base/DataFacebook":void 0,"../resources/scripts/base/controller/GameController":void 0,"../resources/scripts/pooling/NodePool":void 0}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"ff17bhgNtNAO4LPvITqWnl2","SpriteFrameSet");var r=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=r,cc._RF.pop()},{}],en:[function(e,t){"use strict";cc._RF.push(t,"12c56tc0+hARL9aLtzOiOcS","en"),t.exports={puzzles:"PUZZLES",leaderBoard:"LEADERBOARD",rewards:"REWARDS",settings:"SETTINGS",sound:"SOUND",music:"MUSIC",languages:"LANGUAGES",play:"PLAY GAME",hint:"HINT",invite:"INVITE",share:"SHARE",youCompletedThePuzzleIn:"You completed the puzzle in",animals:"ANIMALS",nature:"NATURE",flowers:"FLOWERS",food:"FOOD",color:"COLOR",art:"ART",classic:"CLASSIC",architecture:"ARCHITECTURE"},cc._RF.pop()},{}],"polyglot.min":[function(e,t,r){"use strict";cc._RF.push(t,"93d38d0v41HmY57gtP3qX/g","polyglot.min"),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n(e)}):"object"==typeof r?t.exports=n(e):e.Polyglot=n(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||s}function r(e){var t,r,n,o={};for(t in e)if(e.hasOwnProperty(t))for(n in r=e[t])o[r[n]]=t;return o}function n(e){return e.replace(/^\s+|\s+$/g,"")}function o(e,t,r){var o;return null!=r&&e?n((o=e.split(u))[i(t,r)]||o[0]):e}function a(e){var t=r(f);return t[e]||t.en}function i(e,t){return p[a(e)](t)}function c(e,t){for(var r in t)"_"!==r&&t.hasOwnProperty(r)&&(e=e.replace(new RegExp("%\\{"+r+"\\}","g"),t[r]));return e}function s(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function l(e){var t={};for(var r in e)t[r]=e[r];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var r;for(var n in e)e.hasOwnProperty(n)&&(r=e[n],t&&(n=t+"."+n),"object"==typeof r?this.extend(r,n):this.phrases[n]=r)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var r,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?r=this.phrases[e]:"string"==typeof t._?r=t._:this.allowMissing?r=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof r&&(t=l(t),n=c(n=o(r,this.currentLocale,t.smart_count),t)),n},t.prototype.has=function(e){return e in this.phrases};var u="||||",p={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},f={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],vn:[function(e,t){"use strict";cc._RF.push(t,"71ad4+chVFMJ7+KV6p14JZf","vn"),t.exports={puzzles:"C\xc2U \u0110\u1ed0",leaderBoard:"B\u1ea2NG X\u1ebeP H\u1ea0NG",rewards:"PH\xc0N TH\u01af\u1edeNG",settings:"C\xc0I \u0110\u1eb6T",sound:"\xc2M THANH",music:"NH\u1ea0C N\u1ec0N",languages:"NG\xd4N NG\u1eee",play:"CH\u01a0I",hint:"HINT",invite:"M\u1edcI B\u1ea0N",share:"CHIA S\u1eba",youCompletedThePuzzleIn:"B\u1ea1n \u0111\xe3 ho\xe0n th\xe0nh b\u1ee9c tranh trong",animals:"\u0110\u1ed8NG V\u1eacT",nature:"THI\xcaN NHI\xcaN",flowers:"HOA",food:"M\xd3N \u0102N",color:"M\xc0U S\u1eaeC",art:"NGH\u1ec6 THU\u1eacT",classic:"C\u1ed4 \u0110I\u1ec2N",architecture:"KI\u1ebeN TR\xdaC"},cc._RF.pop()},{}],zh:[function(e,t){"use strict";cc._RF.push(t,"7f002fjK/NKW4/bWi/77AY1","zh"),t.exports={current:"\u5f53\u524d\u8bed\u8a00\uff1a",create_language:"\u521b\u5efa\u65b0\u8bed\u8a00",language:"\u8bed\u8a00\u540d\u79f0",create:"\u521b\u5efa",cancel:"\u53d6\u6d88"},cc._RF.pop()},{}]},{},["en","vn","zh","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min","Splash"]);